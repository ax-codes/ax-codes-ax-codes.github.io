<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>阿兴的博客</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://ax-codes.github.io/"/>
  <updated>2021-01-15T02:12:49.277Z</updated>
  <id>https://ax-codes.github.io/</id>
  
  <author>
    <name>AX Blog</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>最好用的web打印控件lodop</title>
    <link href="https://ax-codes.github.io/2021/01/02/%E6%8A%80%E6%9C%AF/2021-01-02-%E6%9C%80%E5%A5%BD%E7%94%A8%E7%9A%84web%E6%89%93%E5%8D%B0%E6%8E%A7%E4%BB%B6lodop/"/>
    <id>https://ax-codes.github.io/2021/01/02/技术/2021-01-02-最好用的web打印控件lodop/</id>
    <published>2021-01-02T12:00:00.000Z</published>
    <updated>2021-01-15T02:12:49.277Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>lodop 是一种在 web 中实现打印并且预览的控件<br>官网:<a href="http://www.lodop.net/" target="_blank" rel="noopener">http://www.lodop.net/</a><br>接口文档和 demo:<a href="http://www.lodop.net/LodopDemo.html" target="_blank" rel="noopener">http://www.lodop.net/LodopDemo.html</a></p><h3 id="环境配置"><a href="#环境配置" class="headerlink" title="环境配置"></a>环境配置</h3><ol><li>在官网下载发行包</li><li>安装 install_lodop64.exe 和 CLodop_Setup_for_Win32NT.exe 插件并运行,CLodop_Setup_for_Win32NT.exe 的设置中可以修改端口</li><li>在项目中导入 LodopFuncs.js<br>下面就可以根据 LodopFuncs.js 来调用对应的接口了</li></ol><h3 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h3><h4 id="html"><a href="#html" class="headerlink" title="html"></a>html</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span></span></span><br><span class="line"><span class="tag">  <span class="attr">id</span>=<span class="string">"depotHeadDlgShow"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">class</span>=<span class="string">"easyui-dialog"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">style</span>=<span class="string">"padding:10px 20px;"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">fit</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">closed</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">buttons</span>=<span class="string">"#dlg-buttons-show"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">modal</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">cache</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">collapsible</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">closable</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"depotHeadDlgShow_1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"LINE-HEIGHT: 30px"</span> <span class="attr">class</span>=<span class="string">"size16"</span> <span class="attr">align</span>=<span class="string">"center"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>xxxxx有限公司<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">"0"</span> <span class="attr">cellspacing</span>=<span class="string">"0"</span> <span class="attr">cellpadding</span>=<span class="string">"0"</span> <span class="attr">width</span>=<span class="string">"100%"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">"1"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">"1"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">"3"</span>&gt;</span>送货单<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">"1"</span>&gt;</span>单号：<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">"1"</span>&gt;</span>xxxxx<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">"2"</span>&gt;</span>地址：xxxxx<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">"3"</span>&gt;</span>电 话：xxxxx<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">"1"</span>&gt;</span>传 真：<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">"1"</span>&gt;</span>xxxxx<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">"2"</span>&gt;</span>客户名称：<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">"3"</span>&gt;</span>xxxxx制冷电器有限公司<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">"1"</span>&gt;</span>传 真：<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">"1"</span>&gt;</span>2020/12/30<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"depotHeadDlgShow_2"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span></span></span><br><span class="line"><span class="tag">      <span class="attr">id</span>=<span class="string">"materialDataShow"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">border</span>=<span class="string">"1"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">cellspacing</span>=<span class="string">"0"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">cellpadding</span>=<span class="string">"1"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">width</span>=<span class="string">"100%"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">style</span>=<span class="string">"border-collapse:collapse"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">bordercolor</span>=<span class="string">"#333333"</span></span></span><br><span class="line"><span class="tag">    &gt;</span><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"depotHeadDlgShow_3"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span></span></span><br><span class="line"><span class="tag">      <span class="attr">border</span>=<span class="string">"0"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">cellspacing</span>=<span class="string">"0"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">cellpadding</span>=<span class="string">"0"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">width</span>=<span class="string">"100%"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">style</span>=<span class="string">"text-align: right"</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span>供货单位及经手人:xxxx<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="js"><a href="#js" class="headerlink" title="js"></a>js</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"#printDepotHeadPrevShow"</span>).off(<span class="string">"click"</span>).on(<span class="string">"click"</span>,function()&#123;</span><br><span class="line">    <span class="keyword">var</span> rows = $(<span class="string">'#materialDataShow'</span>).datagrid(<span class="string">'getRows'</span>);</span><br><span class="line">    <span class="keyword">var</span> LODOP=getLodop();</span><br><span class="line"></span><br><span class="line">    LODOP.PRINT_INIT(<span class="string">"打印控件功能演示_Lodop功能_分页打印综合表格"</span>);</span><br><span class="line">    <span class="keyword">var</span> strStyle=<span class="string">"&lt;style&gt; table,td,th &#123;border-width: 1px;border-style: solid;border-collapse: collapse&#125;&lt;/style&gt;"</span></span><br><span class="line">    <span class="keyword">var</span> tableHtml = <span class="string">"&lt;TABLE border=1 cellSpacing=0 cellPadding=1 width=\"100%\" style=\"border-collapse:collapse\" bordercolor=\"#333333\"&gt;\n"</span> +</span><br><span class="line">        <span class="string">"&lt;thead&gt;\n"</span> +</span><br><span class="line">        <span class="string">"  &lt;TR&gt;\n"</span> +</span><br><span class="line">        <span class="string">"    &lt;TD width=\"10%\"&gt;\n"</span> +</span><br><span class="line">        <span class="string">"      &lt;DIV &gt;&lt;b&gt;采购单号&lt;/b&gt;&lt;/DIV&gt;&lt;/TD&gt;\n"</span> +</span><br><span class="line">        <span class="string">"    &lt;TD width=\"25%\"&gt;\n"</span> +</span><br><span class="line">        <span class="string">"      &lt;DIV &gt;&lt;b&gt;物料编码&lt;/b&gt;&lt;/DIV&gt;&lt;/TD&gt;\n"</span> +</span><br><span class="line">        <span class="string">"    &lt;TD width=\"10%\"&gt;\n"</span> +</span><br><span class="line">        <span class="string">"      &lt;DIV &gt;&lt;b&gt;物料名称&lt;/b&gt;&lt;/DIV&gt;&lt;/TD&gt;\n"</span> +</span><br><span class="line">        <span class="string">"    &lt;TD width=\"10%\"&gt;\n"</span> +</span><br><span class="line">        <span class="string">"      &lt;DIV &gt;&lt;b&gt;规格型号&lt;/b&gt;&lt;/DIV&gt;&lt;/TD&gt;\n"</span> +</span><br><span class="line">        <span class="string">"    &lt;TD width=\"10%\"&gt;\n"</span> +</span><br><span class="line">        <span class="string">"      &lt;DIV&gt;&lt;b&gt;单位&lt;/b&gt;&lt;/DIV&gt;&lt;/TD&gt;\n"</span> +</span><br><span class="line">        <span class="string">"    &lt;TD width=\"15%\"&gt;\n"</span> +</span><br><span class="line">        <span class="string">"      &lt;DIV&gt;&lt;b&gt;数量&lt;/b&gt;&lt;/DIV&gt;&lt;/TD&gt;\n"</span> +</span><br><span class="line">        <span class="string">"    &lt;TD width=\"20%\"&gt;\n"</span> +</span><br><span class="line">        <span class="string">"      &lt;DIV&gt;&lt;b&gt;备注&lt;/b&gt;&lt;/DIV&gt;&lt;/TD&gt;&lt;/TR&gt;\n"</span> +</span><br><span class="line">        <span class="string">"&lt;/thead&gt;      \n"</span> +</span><br><span class="line">        <span class="string">" &lt;TBODY&gt; "</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// for (let i = 0; i &lt; rows.length; i++) &#123;</span></span><br><span class="line">    <span class="comment">// tableHtml += "  &lt;TR&gt;\n" +</span></span><br><span class="line">    <span class="comment">// "    &lt;TD &gt;"+rows[i].Id+"&lt;/TD&gt;\n" +</span></span><br><span class="line">    <span class="comment">// "    &lt;TD &gt;"+rows[i].barCode+"&lt;/TD&gt;\n" +</span></span><br><span class="line">    <span class="comment">// "    &lt;TD &gt;"+rows[i].name+"&lt;/TD&gt;\n" +</span></span><br><span class="line">    <span class="comment">// "    &lt;TD &gt;"+rows[i].model+"&lt;/TD&gt;\n" +</span></span><br><span class="line">    <span class="comment">// "    &lt;TD &gt;"+rows[i].Unit+"&lt;/TD&gt;\n" +</span></span><br><span class="line">    <span class="comment">// "    &lt;TD &gt;"+rows[i].UnitPrice+"&lt;/TD&gt;\n" +</span></span><br><span class="line">    <span class="comment">// "    &lt;TD &gt;"+rows[i].standard+"&lt;/TD&gt;" +</span></span><br><span class="line">    <span class="comment">// " &lt;/TR&gt;\n";</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (let i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">        tableHtml += <span class="string">"  &lt;TR&gt;\n"</span> +</span><br><span class="line">            <span class="string">"    &lt;TD &gt;"</span>+rows[<span class="number">0</span>].Id+<span class="string">"&lt;/TD&gt;\n"</span> +</span><br><span class="line">            <span class="string">"    &lt;TD &gt;"</span>+rows[<span class="number">0</span>].barCode+<span class="string">"&lt;/TD&gt;\n"</span> +</span><br><span class="line">            <span class="string">"    &lt;TD &gt;"</span>+rows[<span class="number">0</span>].name+<span class="string">"&lt;/TD&gt;\n"</span> +</span><br><span class="line">            <span class="string">"    &lt;TD &gt;"</span>+rows[<span class="number">0</span>].model+<span class="string">"&lt;/TD&gt;\n"</span> +</span><br><span class="line">            <span class="string">"    &lt;TD &gt;"</span>+rows[<span class="number">0</span>].Unit+<span class="string">"&lt;/TD&gt;\n"</span> +</span><br><span class="line">            <span class="string">"    &lt;TD &gt;"</span>+rows[<span class="number">0</span>].UnitPrice+<span class="string">"&lt;/TD&gt;\n"</span> +</span><br><span class="line">            <span class="string">"    &lt;TD &gt;"</span>+rows[<span class="number">0</span>].standard+<span class="string">"&lt;/TD&gt;"</span> +</span><br><span class="line">            <span class="string">" &lt;/TR&gt;\n"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    tableHtml +=<span class="string">" &lt;/TBODY&gt;&lt;/TABLE&gt;"</span>;</span><br><span class="line">    <span class="keyword">var</span> strStyle=<span class="string">"&lt;style&gt; table,td,th &#123;border-width: 1px;border-style: solid;border-collapse: collapse;text-align: center&#125; &lt;/style&gt;"</span></span><br><span class="line">    LODOP.ADD_PRINT_TABLE(<span class="number">128</span>,<span class="string">"5%"</span>,<span class="string">"90%"</span>,<span class="number">314</span>,strStyle+tableHtml);</span><br><span class="line"></span><br><span class="line">    LODOP.SET_PRINT_STYLEA(<span class="number">0</span>,<span class="string">"Vorient"</span>,<span class="number">3</span>);</span><br><span class="line">    LODOP.ADD_PRINT_HTM(<span class="number">26</span>,<span class="string">"5%"</span>,<span class="string">"90%"</span>,<span class="number">109</span>,document.getElementById(<span class="string">"depotHeadDlgShow_1"</span>).innerHTML);</span><br><span class="line">    LODOP.SET_PRINT_STYLEA(<span class="number">0</span>,<span class="string">"ItemType"</span>,<span class="number">1</span>);</span><br><span class="line">    LODOP.SET_PRINT_STYLEA(<span class="number">0</span>,<span class="string">"LinkedItem"</span>,<span class="number">1</span>);</span><br><span class="line">    LODOP.ADD_PRINT_HTM(<span class="number">444</span>,<span class="string">"5%"</span>,<span class="string">"90%"</span>,<span class="number">54</span>,document.getElementById(<span class="string">"depotHeadDlgShow_3"</span>).innerHTML);</span><br><span class="line">    LODOP.SET_PRINT_STYLEA(<span class="number">0</span>,<span class="string">"ItemType"</span>,<span class="number">1</span>);</span><br><span class="line">    LODOP.SET_PRINT_STYLEA(<span class="number">0</span>,<span class="string">"LinkedItem"</span>,<span class="number">1</span>);</span><br><span class="line">    LODOP.ADD_PRINT_TEXT(<span class="number">560</span>,<span class="number">96</span>,<span class="string">"76.25%"</span>,<span class="number">20</span>,<span class="string">"xxxxxxxx机电有限公司真诚祝您好远！"</span>);</span><br><span class="line">    LODOP.SET_PRINT_STYLEA(<span class="number">0</span>,<span class="string">"LinkedItem"</span>,<span class="number">4</span>);</span><br><span class="line">    LODOP.SET_PRINT_STYLEA(<span class="number">0</span>,<span class="string">"FontSize"</span>,<span class="number">12</span>);</span><br><span class="line">    LODOP.SET_PRINT_STYLEA(<span class="number">0</span>,<span class="string">"FontColor"</span>,<span class="string">"#ff0000"</span>);</span><br><span class="line">    LODOP.SET_PRINT_STYLEA(<span class="number">0</span>,<span class="string">"Alignment"</span>,<span class="number">2</span>);</span><br><span class="line">    LODOP.SET_PRINT_STYLEA(<span class="number">0</span>,<span class="string">"ItemType"</span>,<span class="number">1</span>);</span><br><span class="line">    LODOP.SET_PRINT_STYLEA(<span class="number">0</span>,<span class="string">"Horient"</span>,<span class="number">3</span>);</span><br><span class="line">    LODOP.ADD_PRINT_HTM(<span class="number">1</span>,<span class="number">600</span>,<span class="number">300</span>,<span class="number">100</span>,<span class="string">"总页号：&lt;font color='#0000ff' format='ChineseNum'&gt;&lt;span tdata='pageNO'&gt;第##页&lt;/span&gt;/&lt;span tdata='pageCount'&gt;共##页&lt;/span&gt;&lt;/font&gt;"</span>);</span><br><span class="line"></span><br><span class="line">    LODOP.SET_PRINT_STYLEA(<span class="number">0</span>,<span class="string">"ItemType"</span>,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    LODOP.SET_PRINT_STYLEA(<span class="number">0</span>,<span class="string">"Horient"</span>,<span class="number">1</span>);</span><br><span class="line">    LODOP.ADD_PRINT_TEXT(<span class="number">3</span>,<span class="number">34</span>,<span class="number">196</span>,<span class="number">20</span>,<span class="string">"总页眉：《销售出货》"</span>);</span><br><span class="line">    LODOP.SET_PRINT_STYLEA(<span class="number">0</span>,<span class="string">"ItemType"</span>,<span class="number">1</span>);</span><br><span class="line">    LODOP.PREVIEW();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h3><h4 id="预览效果"><a href="#预览效果" class="headerlink" title="预览效果"></a>预览效果</h4><p><img src="/2021/01/02/%E6%8A%80%E6%9C%AF/2021-01-02-%E6%9C%80%E5%A5%BD%E7%94%A8%E7%9A%84web%E6%89%93%E5%8D%B0%E6%8E%A7%E4%BB%B6lodop/2.png" alt="2.png"></p><h4 id="实际打印效果"><a href="#实际打印效果" class="headerlink" title="实际打印效果"></a>实际打印效果</h4><p><img src="/2021/01/02/%E6%8A%80%E6%9C%AF/2021-01-02-%E6%9C%80%E5%A5%BD%E7%94%A8%E7%9A%84web%E6%89%93%E5%8D%B0%E6%8E%A7%E4%BB%B6lodop/1.png" alt="1.png"></p><h3 id="备注"><a href="#备注" class="headerlink" title="备注"></a>备注</h3><ol><li>如果我们的 table 使用了例如 jquery datagrid 的类似组件,可能我们直接 innerHtml 获取 html 打印会有问题,那么我可以自己用 js 拼接 html,最后通过这个 html 来打印</li><li>修改了代码但是会没有生效,可以试下清除缓存</li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;p&gt;lodop 是一种在 web 中实现打印并且预览的控件&lt;br&gt;官网:&lt;a href=&quot;http://www.lodop.net/&quot; targ
      
    
    </summary>
    
      <category term="技术" scheme="https://ax-codes.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="python" scheme="https://ax-codes.github.io/tags/python/"/>
    
      <category term="csharp" scheme="https://ax-codes.github.io/tags/csharp/"/>
    
      <category term=".net/.net core" scheme="https://ax-codes.github.io/tags/net-net-core/"/>
    
      <category term="js" scheme="https://ax-codes.github.io/tags/js/"/>
    
      <category term="java" scheme="https://ax-codes.github.io/tags/java/"/>
    
      <category term="spring" scheme="https://ax-codes.github.io/tags/spring/"/>
    
  </entry>
  
  <entry>
    <title>java mysql-connector-java 操作mysql</title>
    <link href="https://ax-codes.github.io/2020/12/28/%E6%8A%80%E6%9C%AF/2020-12-28-java%20mysql-connector-java%20%E6%93%8D%E4%BD%9Cmysql/"/>
    <id>https://ax-codes.github.io/2020/12/28/技术/2020-12-28-java mysql-connector-java 操作mysql/</id>
    <published>2020-12-28T12:00:00.000Z</published>
    <updated>2020-12-29T03:54:31.567Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>mysql 连接库版本:mysql-connector-java-8.0.19.jar</p><h3 id="pom-xml-配置"><a href="#pom-xml-配置" class="headerlink" title="pom.xml 配置"></a>pom.xml 配置</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.19<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="sql"><a href="#sql" class="headerlink" title="sql"></a>sql</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`stu`</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`stu`</span> (</span><br><span class="line">    <span class="string">`id`</span> <span class="built_in">INT</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>  <span class="keyword">COMMENT</span> <span class="string">'编号'</span>,</span><br><span class="line">    <span class="string">`name`</span> <span class="built_in">varchar</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'姓名'</span>,</span><br><span class="line">    <span class="string">`age`</span> <span class="built_in">INT</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>  <span class="keyword">COMMENT</span> <span class="string">'年龄'</span>,</span><br><span class="line">    PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>)</span><br><span class="line">) <span class="keyword">COMMENT</span>=<span class="string">'学生表'</span>;</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> stu <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">'张三'</span>,<span class="number">20</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> stu <span class="keyword">VALUES</span>(<span class="number">2</span>,<span class="string">'李四'</span>,<span class="number">21</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> stu <span class="keyword">VALUES</span>(<span class="number">3</span>,<span class="string">'王五'</span>,<span class="number">19</span>);</span><br></pre></td></tr></table></figure><h3 id="测试连接代码"><a href="#测试连接代码" class="headerlink" title="测试连接代码"></a>测试连接代码</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testConnect</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        <span class="comment">//调用Class.forName()方法加载驱动程序</span></span><br><span class="line">        Class.forName(<span class="string">"com.mysql.cj.jdbc.Driver"</span>);</span><br><span class="line">        System.out.println(<span class="string">"成功加载MySQL驱动！"</span>);</span><br><span class="line">    &#125;<span class="keyword">catch</span>(ClassNotFoundException e1)&#123;</span><br><span class="line">        System.out.println(<span class="string">"找不到MySQL驱动!"</span>);</span><br><span class="line">        e1.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    String url=<span class="string">"jdbc:mysql://localhost:3306/springboot?serverTimezone=UTC&amp;useUnicode=true&amp;characterEncoding=utf-8"</span>;    <span class="comment">//JDBC的URL</span></span><br><span class="line">    <span class="comment">//调用DriverManager对象的getConnection()方法，获得一个Connection对象</span></span><br><span class="line">    Connection conn;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        conn = DriverManager.getConnection(url,<span class="string">"root"</span>,<span class="string">"root"</span>);<span class="comment">//url 账号 密码</span></span><br><span class="line">        <span class="comment">//创建一个Statement对象</span></span><br><span class="line">        Statement stmt = conn.createStatement(); <span class="comment">//创建Statement对象</span></span><br><span class="line">        System.out.print(<span class="string">"成功连接到数据库！"</span>);</span><br><span class="line">        stmt.close();</span><br><span class="line">        conn.close();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (SQLException e)&#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="增删查改代码"><a href="#增删查改代码" class="headerlink" title="增删查改代码"></a>增删查改代码</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testProcess</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        <span class="comment">//调用Class.forName()方法加载驱动程序</span></span><br><span class="line">        Class.forName(<span class="string">"com.mysql.cj.jdbc.Driver"</span>);</span><br><span class="line">        System.out.println(<span class="string">"成功加载MySQL驱动！"</span>);</span><br><span class="line"></span><br><span class="line">        String url=<span class="string">"jdbc:mysql://localhost:3306/springboot?serverTimezone=UTC&amp;useUnicode=true&amp;characterEncoding=utf-8"</span>;    <span class="comment">//JDBC的URL</span></span><br><span class="line">        Connection conn;</span><br><span class="line"></span><br><span class="line">        conn = DriverManager.getConnection(url,    <span class="string">"root"</span>,<span class="string">"root"</span>);<span class="comment">//url 账号 密码</span></span><br><span class="line">        Statement stmt = conn.createStatement(); <span class="comment">//创建Statement对象</span></span><br><span class="line">        System.out.println(<span class="string">"成功连接到数据库！"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//查询数据的代码</span></span><br><span class="line">        String sql = <span class="string">"select * from stu"</span>;    <span class="comment">//要执行的SQL</span></span><br><span class="line">        ResultSet rs = stmt.executeQuery(sql);<span class="comment">//创建数据对象</span></span><br><span class="line">        System.out.println(<span class="string">"原始数据： \n "</span> + <span class="string">"编号"</span>+<span class="string">"\t"</span>+<span class="string">"姓名"</span>+<span class="string">"\t"</span>+<span class="string">"年龄"</span>);</span><br><span class="line">        <span class="keyword">while</span> (rs.next())&#123;</span><br><span class="line">            System.out.print(rs.getInt(<span class="number">1</span>) + <span class="string">"\t"</span>);</span><br><span class="line">            System.out.print(rs.getString(<span class="number">2</span>) + <span class="string">"\t"</span>);</span><br><span class="line">            System.out.print(rs.getInt(<span class="number">3</span>) + <span class="string">"\t"</span>);</span><br><span class="line">            System.out.println();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//增加数据</span></span><br><span class="line">        String sql1 = <span class="string">"insert into stu (id,name,age) values(?,?,?)"</span>;</span><br><span class="line">        PreparedStatement pst = conn.prepareStatement(sql1);</span><br><span class="line">        pst.setInt(<span class="number">1</span>,<span class="number">4</span>);</span><br><span class="line">        pst.setString(<span class="number">2</span>,<span class="string">"sunlu"</span>);</span><br><span class="line">        pst.setInt(<span class="number">3</span>, <span class="number">25</span>);</span><br><span class="line">        pst.executeUpdate();</span><br><span class="line">        ResultSet rs1 = stmt.executeQuery(sql);<span class="comment">//创建数据对象</span></span><br><span class="line">        System.out.println(<span class="string">"插入后数据：  \n"</span> + <span class="string">"编号"</span>+<span class="string">"\t"</span>+<span class="string">"姓名"</span>+<span class="string">"\t"</span>+<span class="string">"年龄"</span>);</span><br><span class="line">        <span class="keyword">while</span> (rs1.next())&#123;</span><br><span class="line">            System.out.print(rs1.getInt(<span class="number">1</span>) + <span class="string">"\t"</span>);</span><br><span class="line">            System.out.print(rs1.getString(<span class="number">2</span>) + <span class="string">"\t"</span>);</span><br><span class="line">            System.out.print(rs1.getInt(<span class="number">3</span>) + <span class="string">"\t"</span>);</span><br><span class="line">            System.out.println();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//修改数据的代码</span></span><br><span class="line">        String sql2 = <span class="string">"update stu set name=? where id=?"</span>;</span><br><span class="line">        pst = conn.prepareStatement(sql2);</span><br><span class="line">        pst.setString(<span class="number">1</span>,<span class="string">"nick"</span>);</span><br><span class="line">        pst.setInt(<span class="number">2</span>,<span class="number">1</span>);</span><br><span class="line">        pst.executeUpdate();</span><br><span class="line"></span><br><span class="line">        ResultSet rs3 = stmt.executeQuery(sql);<span class="comment">//创建数据对象</span></span><br><span class="line">        System.out.println(<span class="string">"修改后数据：  \n"</span> + <span class="string">"编号"</span>+<span class="string">"\t"</span>+<span class="string">"姓名"</span>+<span class="string">"\t"</span>+<span class="string">"年龄"</span>);</span><br><span class="line">        <span class="keyword">while</span> (rs3.next())&#123;</span><br><span class="line">            System.out.print(rs3.getInt(<span class="number">1</span>) + <span class="string">"\t"</span>);</span><br><span class="line">            System.out.print(rs3.getString(<span class="number">2</span>) + <span class="string">"\t"</span>);</span><br><span class="line">            System.out.print(rs3.getInt(<span class="number">3</span>) + <span class="string">"\t"</span>);</span><br><span class="line">            System.out.println();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//删除数据的代码</span></span><br><span class="line">        String sql3 = <span class="string">"delete from stu where id=?"</span>;</span><br><span class="line">        pst = conn.prepareStatement(sql3);</span><br><span class="line">        pst.setInt(<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line">        pst.executeUpdate();</span><br><span class="line"></span><br><span class="line">        ResultSet rs2 = stmt.executeQuery(sql);<span class="comment">//创建数据对象</span></span><br><span class="line">        System.out.println(<span class="string">"删除后数据：   \n"</span> + <span class="string">"编号"</span>+<span class="string">"\t"</span>+<span class="string">"姓名"</span>+<span class="string">"\t"</span>+<span class="string">"年龄"</span>);</span><br><span class="line">        <span class="keyword">while</span> (rs2.next())&#123;</span><br><span class="line">            System.out.print(rs2.getInt(<span class="number">1</span>) + <span class="string">"\t"</span>);</span><br><span class="line">            System.out.print(rs2.getString(<span class="number">2</span>) + <span class="string">"\t"</span>);</span><br><span class="line">            System.out.print(rs2.getInt(<span class="number">3</span>) + <span class="string">"\t"</span>);</span><br><span class="line">            System.out.println();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        rs.close();</span><br><span class="line">        stmt.close();</span><br><span class="line">        conn.close();</span><br><span class="line">    &#125;<span class="keyword">catch</span>(Exception e)</span><br><span class="line">    &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="备注"><a href="#备注" class="headerlink" title="备注"></a>备注</h3><p>MySQL 8.0 以上版本的数据库连接有所不同:<br>1.MySQL 8.0 以上版本驱动包版本 mysql-connector-java-8.0.19.jar<br>2.com.mysql.jdbc.Driver 更换为 com.mysql.cj.jdbc.Driver<br>MySQL 8.0 以上版本不需要建立 SSL 连接的，需要显示关闭,最后还需要设置 CST</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;p&gt;mysql 连接库版本:mysql-connector-java-8.0.19.jar&lt;/p&gt;
&lt;h3 id=&quot;pom-xml-配置&quot;&gt;&lt;a
      
    
    </summary>
    
      <category term="技术" scheme="https://ax-codes.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="java" scheme="https://ax-codes.github.io/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>springboot使用log4j2</title>
    <link href="https://ax-codes.github.io/2020/12/16/%E6%8A%80%E6%9C%AF/2020-12-16-spring%E6%88%96springboot%E4%BD%BF%E7%94%A8log4j2/"/>
    <id>https://ax-codes.github.io/2020/12/16/技术/2020-12-16-spring或springboot使用log4j2/</id>
    <published>2020-12-16T12:00:00.000Z</published>
    <updated>2020-12-25T08:53:43.642Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>Spring Boot 使用 Apache Commons 日志记录所有内部日志记录,Spring Boot 的默认配置为使用 Java Util Logging,Log4j2 和 Logback 提供了支持.使用这些,我们可以配置控制台日志以及文件日志.如果您使用的是 Spring Boot Starters,则 Logback 将为日志记录提供良好的支持.此外,Logback 还提供了对 Common Logging,Util Logging,Log4J 和 SLF4J 的良好支持,因为 log4j2 在多线程中性能会好很多,所以我们这里使用 log4j2</p><h3 id="修改-pom-xml"><a href="#修改-pom-xml" class="headerlink" title="修改 pom.xml"></a>修改 pom.xml</h3><p>在 springboot 中</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-log4j2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>其他 maven 项目中</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.logging.log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.12.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.logging.log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.12.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p>在 classpath 下新增 log4j2-spring.xml,并添加下面内容,我们也可以在 application.yml 里指定 log4j2 的名称,这里我们使用默认 1 的</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="comment">&lt;!--日志级别以及优先级排序: OFF &gt; FATAL &gt; ERROR &gt; WARN &gt; INFO &gt; DEBUG &gt; TRACE &gt; ALL --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--Configuration后面的status,这个用于设置log4j2自身内部的信息输出,可以不设置,当设置成trace时,你会看到log4j2内部各种详细输出--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--monitorInterval：Log4j能够自动检测修改配置 文件和重新配置本身,设置间隔秒数--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span> <span class="attr">status</span>=<span class="string">"WARN"</span> <span class="attr">monitorInterval</span>=<span class="string">"1800"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Properties</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ==============================================公共配置============================================== --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 设置日志文件的目录名称 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"logFileName"</span>&gt;</span>qfxLog4jDemoLog<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 日志默认存放的位置,可以设置为项目根路径下,也可指定绝对路径 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 存放路径一:通用路径,window平台 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &lt;property name="basePath"&gt;d:/logs/$&#123;logFileName&#125;&lt;/property&gt; --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 存放路径二:web工程专用,java项目没有这个变量,需要删掉,否则会报异常,这里把日志放在web项目的根目录下 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &lt;property name="basePath"&gt;$&#123;web:rootDir&#125;/$&#123;logFileName&#125;&lt;/property&gt; --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 存放路径三:web工程专用,java项目没有这个变量,需要删掉,否则会报异常,这里把日志放在tocmat的logs目录下 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"basePath"</span>&gt;</span>$&#123;sys:catalina.home&#125;/logs/$&#123;logFileName&#125;<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 控制台默认输出格式,"%-5level":日志级别,"%l":输出完整的错误位置,是小写的L,因为有行号显示,所以影响日志输出的性能 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"console_log_pattern"</span>&gt;</span>%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; %highlight&#123;%-5level&#125; [%t] %highlight&#123;%c&#123;1.&#125;.%M(%L)&#125;: %msg%n<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 日志文件默认输出格式,不带行号输出(行号显示会影响日志输出性能);%C:大写,类名;%M:方法名;%m:错误信息;%n:换行 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &lt;property name="log_pattern"&gt;%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%-5level] %C.%M - %m%n&lt;/property&gt; --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 日志文件默认输出格式,另类带行号输出(对日志输出性能未知);%C:大写,类名;%M:方法名;%L:行号;%m:错误信息;%n:换行 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"log_pattern"</span>&gt;</span>%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; &#123;%-5level&#125; [%t] &#123;%c&#123;1.&#125;.%M(%L)&#125;: %msg%n<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 日志默认切割的最小单位 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"every_file_size"</span>&gt;</span>20MB<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 日志默认输出级别 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"output_log_level"</span>&gt;</span>DEBUG<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- ===========================================所有级别日志配置=========================================== --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 日志默认存放路径(所有级别日志) --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"rolling_fileName"</span>&gt;</span>$&#123;basePath&#125;/all.log<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 日志默认压缩路径,将超过指定文件大小的日志,自动存入按"年月"建立的文件夹下面并进行压缩,作为存档 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"rolling_filePattern"</span>&gt;</span>$&#123;basePath&#125;/%d&#123;yyyy-MM&#125;/all-%d&#123;yyyy-MM-dd-HH&#125;-%i.log.gz<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 日志默认同类型日志,同一文件夹下可以存放的数量,不设置此属性则默认为7个,filePattern最后要带%i才会生效 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"rolling_max"</span>&gt;</span>500<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 日志默认同类型日志,多久生成一个新的日志文件,这个配置需要和filePattern结合使用;</span></span><br><span class="line"><span class="comment">                如果设置为1,filePattern是%d&#123;yyyy-MM-dd&#125;到天的格式,则间隔一天生成一个文件</span></span><br><span class="line"><span class="comment">                如果设置为12,filePattern是%d&#123;yyyy-MM-dd-HH&#125;到小时的格式,则间隔12小时生成一个文件 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"rolling_timeInterval"</span>&gt;</span>12<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 日志默认同类型日志,是否对封存时间进行调制,若为true,则封存时间将以0点为边界进行调整,</span></span><br><span class="line"><span class="comment">                如:现在是早上3am,interval是4,那么第一次滚动是在4am,接着是8am,12am...而不是7am --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"rolling_timeModulate"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- ============================================Info级别日志============================================ --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Info日志默认存放路径(Info级别日志) --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"info_fileName"</span>&gt;</span>$&#123;basePath&#125;/info.log<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Info日志默认压缩路径,将超过指定文件大小的日志,自动存入按"年月"建立的文件夹下面并进行压缩,作为存档 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"info_filePattern"</span>&gt;</span>$&#123;basePath&#125;/%d&#123;yyyy-MM&#125;/info-%d&#123;yyyy-MM-dd&#125;-%i.log.gz<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Info日志默认同一文件夹下可以存放的数量,不设置此属性则默认为7个 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"info_max"</span>&gt;</span>100<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 日志默认同类型日志,多久生成一个新的日志文件,这个配置需要和filePattern结合使用;</span></span><br><span class="line"><span class="comment">                如果设置为1,filePattern是%d&#123;yyyy-MM-dd&#125;到天的格式,则间隔一天生成一个文件</span></span><br><span class="line"><span class="comment">                如果设置为12,filePattern是%d&#123;yyyy-MM-dd-HH&#125;到小时的格式,则间隔12小时生成一个文件 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"info_timeInterval"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 日志默认同类型日志,是否对封存时间进行调制,若为true,则封存时间将以0点为边界进行调整,</span></span><br><span class="line"><span class="comment">                如:现在是早上3am,interval是4,那么第一次滚动是在4am,接着是8am,12am...而不是7am --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"info_timeModulate"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- ============================================Warn级别日志============================================ --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Warn日志默认存放路径(Warn级别日志) --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"warn_fileName"</span>&gt;</span>$&#123;basePath&#125;/warn.log<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Warn日志默认压缩路径,将超过指定文件大小的日志,自动存入按"年月"建立的文件夹下面并进行压缩,作为存档 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"warn_filePattern"</span>&gt;</span>$&#123;basePath&#125;/%d&#123;yyyy-MM&#125;/warn-%d&#123;yyyy-MM-dd&#125;-%i.log.gz<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Warn日志默认同一文件夹下可以存放的数量,不设置此属性则默认为7个 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"warn_max"</span>&gt;</span>100<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 日志默认同类型日志,多久生成一个新的日志文件,这个配置需要和filePattern结合使用;</span></span><br><span class="line"><span class="comment">                如果设置为1,filePattern是%d&#123;yyyy-MM-dd&#125;到天的格式,则间隔一天生成一个文件</span></span><br><span class="line"><span class="comment">                如果设置为12,filePattern是%d&#123;yyyy-MM-dd-HH&#125;到小时的格式,则间隔12小时生成一个文件 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"warn_timeInterval"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 日志默认同类型日志,是否对封存时间进行调制,若为true,则封存时间将以0点为边界进行调整,</span></span><br><span class="line"><span class="comment">                如:现在是早上3am,interval是4,那么第一次滚动是在4am,接着是8am,12am...而不是7am --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"warn_timeModulate"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- ============================================Error级别日志============================================ --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Error日志默认存放路径(Error级别日志) --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"error_fileName"</span>&gt;</span>$&#123;basePath&#125;/error.log<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Error日志默认压缩路径,将超过指定文件大小的日志,自动存入按"年月"建立的文件夹下面并进行压缩,作为存档 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"error_filePattern"</span>&gt;</span>$&#123;basePath&#125;/%d&#123;yyyy-MM&#125;/error-%d&#123;yyyy-MM-dd&#125;-%i.log.gz<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Error日志默认同一文件夹下可以存放的数量,不设置此属性则默认为7个 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"error_max"</span>&gt;</span>100<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 日志默认同类型日志,多久生成一个新的日志文件,这个配置需要和filePattern结合使用;</span></span><br><span class="line"><span class="comment">                如果设置为1,filePattern是%d&#123;yyyy-MM-dd&#125;到天的格式,则间隔一天生成一个文件</span></span><br><span class="line"><span class="comment">                如果设置为12,filePattern是%d&#123;yyyy-MM-dd-HH&#125;到小时的格式,则间隔12小时生成一个文件 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"error_timeInterval"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 日志默认同类型日志,是否对封存时间进行调制,若为true,则封存时间将以0点为边界进行调整,</span></span><br><span class="line"><span class="comment">                如:现在是早上3am,interval是4,那么第一次滚动是在4am,接着是8am,12am...而不是7am --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"error_timeModulate"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- ============================================控制台显示控制============================================ --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 控制台显示的日志最低级别 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"console_print_level"</span>&gt;</span>DEBUG<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--定义appender --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appenders</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- =======================================用来定义输出到控制台的配置======================================= --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Console</span> <span class="attr">name</span>=<span class="string">"Console"</span> <span class="attr">target</span>=<span class="string">"SYSTEM_OUT"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 设置控制台只输出level及以上级别的信息(onMatch),其他的直接拒绝(onMismatch)--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ThresholdFilter</span> <span class="attr">level</span>=<span class="string">"$&#123;console_print_level&#125;"</span> <span class="attr">onMatch</span>=<span class="string">"ACCEPT"</span> <span class="attr">onMismatch</span>=<span class="string">"DENY"</span>/&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 设置输出格式,不设置默认为:%m%n --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">PatternLayout</span> <span class="attr">pattern</span>=<span class="string">"$&#123;console_log_pattern&#125;"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">Console</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- ================================打印root中指定的level级别以上的日志到文件================================ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">RollingFile</span> <span class="attr">name</span>=<span class="string">"RollingFile"</span> <span class="attr">fileName</span>=<span class="string">"$&#123;rolling_fileName&#125;"</span> <span class="attr">filePattern</span>=<span class="string">"$&#123;rolling_filePattern&#125;"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">PatternLayout</span> <span class="attr">pattern</span>=<span class="string">"$&#123;log_pattern&#125;"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Policies</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">TimeBasedTriggeringPolicy</span> <span class="attr">interval</span>=<span class="string">"$&#123;rolling_timeInterval&#125;"</span> <span class="attr">modulate</span>=<span class="string">"$&#123;warn_timeModulate&#125;"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">SizeBasedTriggeringPolicy</span> <span class="attr">size</span>=<span class="string">"$&#123;every_file_size&#125;"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">Policies</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 设置同类型日志,同一文件夹下可以存放的数量,如果不设置此属性则默认存放7个文件 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">DefaultRolloverStrategy</span> <span class="attr">max</span>=<span class="string">"$&#123;rolling_max&#125;"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">RollingFile</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- =======================================打印INFO级别的日志到文件======================================= --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">RollingFile</span> <span class="attr">name</span>=<span class="string">"InfoFile"</span> <span class="attr">fileName</span>=<span class="string">"$&#123;info_fileName&#125;"</span> <span class="attr">filePattern</span>=<span class="string">"$&#123;info_filePattern&#125;"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">PatternLayout</span> <span class="attr">pattern</span>=<span class="string">"$&#123;log_pattern&#125;"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Policies</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">TimeBasedTriggeringPolicy</span> <span class="attr">interval</span>=<span class="string">"$&#123;info_timeInterval&#125;"</span> <span class="attr">modulate</span>=<span class="string">"$&#123;info_timeModulate&#125;"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">SizeBasedTriggeringPolicy</span> <span class="attr">size</span>=<span class="string">"$&#123;every_file_size&#125;"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">Policies</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">DefaultRolloverStrategy</span> <span class="attr">max</span>=<span class="string">"$&#123;info_max&#125;"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Filters</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ThresholdFilter</span> <span class="attr">level</span>=<span class="string">"WARN"</span> <span class="attr">onMatch</span>=<span class="string">"DENY"</span> <span class="attr">onMismatch</span>=<span class="string">"NEUTRAL"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ThresholdFilter</span> <span class="attr">level</span>=<span class="string">"INFO"</span> <span class="attr">onMatch</span>=<span class="string">"ACCEPT"</span> <span class="attr">onMismatch</span>=<span class="string">"DENY"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">Filters</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">RollingFile</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- =======================================打印WARN级别的日志到文件======================================= --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">RollingFile</span> <span class="attr">name</span>=<span class="string">"WarnFile"</span> <span class="attr">fileName</span>=<span class="string">"$&#123;warn_fileName&#125;"</span> <span class="attr">filePattern</span>=<span class="string">"$&#123;warn_filePattern&#125;"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">PatternLayout</span> <span class="attr">pattern</span>=<span class="string">"$&#123;log_pattern&#125;"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Policies</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">TimeBasedTriggeringPolicy</span> <span class="attr">interval</span>=<span class="string">"$&#123;warn_timeInterval&#125;"</span> <span class="attr">modulate</span>=<span class="string">"$&#123;warn_timeModulate&#125;"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">SizeBasedTriggeringPolicy</span> <span class="attr">size</span>=<span class="string">"$&#123;every_file_size&#125;"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">Policies</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">DefaultRolloverStrategy</span> <span class="attr">max</span>=<span class="string">"$&#123;warn_max&#125;"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Filters</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ThresholdFilter</span> <span class="attr">level</span>=<span class="string">"ERROR"</span> <span class="attr">onMatch</span>=<span class="string">"DENY"</span> <span class="attr">onMismatch</span>=<span class="string">"NEUTRAL"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ThresholdFilter</span> <span class="attr">level</span>=<span class="string">"WARN"</span> <span class="attr">onMatch</span>=<span class="string">"ACCEPT"</span> <span class="attr">onMismatch</span>=<span class="string">"DENY"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">Filters</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">RollingFile</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- =======================================打印ERROR级别的日志到文件======================================= --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">RollingFile</span> <span class="attr">name</span>=<span class="string">"ErrorFile"</span> <span class="attr">fileName</span>=<span class="string">"$&#123;error_fileName&#125;"</span> <span class="attr">filePattern</span>=<span class="string">"$&#123;error_filePattern&#125;"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">PatternLayout</span> <span class="attr">pattern</span>=<span class="string">"$&#123;log_pattern&#125;"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Policies</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">TimeBasedTriggeringPolicy</span> <span class="attr">interval</span>=<span class="string">"$&#123;error_timeInterval&#125;"</span> <span class="attr">modulate</span>=<span class="string">"$&#123;error_timeModulate&#125;"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">SizeBasedTriggeringPolicy</span> <span class="attr">size</span>=<span class="string">"$&#123;every_file_size&#125;"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">Policies</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">DefaultRolloverStrategy</span> <span class="attr">max</span>=<span class="string">"$&#123;error_max&#125;"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Filters</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ThresholdFilter</span> <span class="attr">level</span>=<span class="string">"FATAL"</span> <span class="attr">onMatch</span>=<span class="string">"DENY"</span> <span class="attr">onMismatch</span>=<span class="string">"NEUTRAL"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ThresholdFilter</span> <span class="attr">level</span>=<span class="string">"ERROR"</span> <span class="attr">onMatch</span>=<span class="string">"ACCEPT"</span> <span class="attr">onMismatch</span>=<span class="string">"DENY"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">Filters</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">RollingFile</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appenders</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--定义logger,只有定义了logger并引入的appender,appender才会生效--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">loggers</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 设置打印sql语句配置开始,以下两者配合使用,可以优化日志的输出信息,减少一些不必要信息的输出 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 设置java.sql包下的日志只打印DEBUG及以上级别的日志,此设置可以支持sql语句的日志打印 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"java.sql"</span> <span class="attr">level</span>=<span class="string">"DEBUG"</span> <span class="attr">additivity</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"Console"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 设置org.mybatis.spring包下的日志只打印WARN及以上级别的日志 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"org.mybatis.spring"</span> <span class="attr">level</span>=<span class="string">"WARN"</span> <span class="attr">additivity</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"Console"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 设置org.mybatis.spring包下的日志只打印WARN及以上级别的日志 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"org.springframework"</span> <span class="attr">level</span>=<span class="string">"WARN"</span> <span class="attr">additivity</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"Console"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 设置org.mybatis.spring包下的日志只打印WARN及以上级别的日志 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"com.qfx.workflow.service"</span> <span class="attr">level</span>=<span class="string">"WARN"</span> <span class="attr">additivity</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"Console"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 设置打印sql语句配置结束 --&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--建立一个默认的root的logger--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">"$&#123;output_log_level&#125;"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"RollingFile"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"Console"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"InfoFile"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"WarnFile"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"ErrorFile"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">loggers</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.spring_crm;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.ApplicationArguments;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.ApplicationRunner;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringCrmApplication</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Log logger = LogFactory.getLog(Application<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        logger.info(<span class="string">"this is a info message"</span>);</span><br><span class="line">        logger.warn(<span class="string">"this is a warn message"</span>);</span><br><span class="line">        logger.error(<span class="string">"this is a error message"</span>);</span><br><span class="line">        SpringApplication.run(SpringCrmApplication<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h3><p>1:如果输出的 log 没有颜色的话需要检查 log 模板是否带上了%highlight<br>2:要是有了%highlight 还是没有则需要在编辑配置-&gt;配置-&gt;虚拟机选项里加上”-Dlog4j.skipJansi=false”</p><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><p>如果我们需要以注解的方式创建 log 对象的话可以这样做</p><h4 id="修改-pom-xml-1"><a href="#修改-pom-xml-1" class="headerlink" title="修改 pom.xml"></a>修改 pom.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="idea-安装-lombok-插件"><a href="#idea-安装-lombok-插件" class="headerlink" title="idea 安装 lombok 插件"></a>idea 安装 lombok 插件</h4><h4 id="使用-1"><a href="#使用-1" class="headerlink" title="使用"></a>使用</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringCrmApplication</span> <span class="keyword">implements</span> <span class="title">ApplicationRunner</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        log.error(<span class="string">"Something else is wrong here"</span>);</span><br><span class="line">        SpringApplication.run(SpringCrmApplication<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;p&gt;Spring Boot 使用 Apache Commons 日志记录所有内部日志记录,Spring Boot 的默认配置为使用 Java U
      
    
    </summary>
    
      <category term="技术" scheme="https://ax-codes.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="java" scheme="https://ax-codes.github.io/tags/java/"/>
    
      <category term="spring" scheme="https://ax-codes.github.io/tags/spring/"/>
    
  </entry>
  
  <entry>
    <title>linux下查看CPU的总核数以及逻辑核数</title>
    <link href="https://ax-codes.github.io/2020/07/29/%E6%8A%80%E6%9C%AF/2020-07-29-linux%E4%B8%8B%E6%9F%A5%E7%9C%8BCPU%E7%9A%84%E6%80%BB%E6%A0%B8%E6%95%B0%E4%BB%A5%E5%8F%8A%E9%80%BB%E8%BE%91%E6%A0%B8%E6%95%B0/"/>
    <id>https://ax-codes.github.io/2020/07/29/技术/2020-07-29-linux下查看CPU的总核数以及逻辑核数/</id>
    <published>2020-07-29T12:00:00.000Z</published>
    <updated>2020-07-29T05:50:07.117Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>总核数 = 物理 CPU 个数 X 每颗物理 CPU 的核数<br>总逻辑 CPU 数 = 物理 CPU 个数 X 每颗物理 CPU 的核数 X 超线程数</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 查看物理CPU个数</span></span><br><span class="line">cat /proc/cpuinfo| grep "physical id"| sort| uniq| wc -l</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看每个物理CPU中core的个数(即核数)</span></span><br><span class="line">cat /proc/cpuinfo| grep "cpu cores"| uniq</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看逻辑CPU的个数</span></span><br><span class="line">cat /proc/cpuinfo| grep "processor"| wc -l</span><br><span class="line"></span><br><span class="line"><span class="meta"> #</span><span class="bash">查看CPU信息（型号）</span></span><br><span class="line">cat /proc/cpuinfo | grep name | cut -f2 -d: | uniq -c</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">查看内 存信息</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> cat /proc/meminfo</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;p&gt;总核数 = 物理 CPU 个数 X 每颗物理 CPU 的核数&lt;br&gt;总逻辑 CPU 数 = 物理 CPU 个数 X 每颗物理 CPU 的核数
      
    
    </summary>
    
      <category term="技术" scheme="https://ax-codes.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="linux" scheme="https://ax-codes.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>批量导出mysql多个数据库结构和数据脚本</title>
    <link href="https://ax-codes.github.io/2020/07/29/%E6%8A%80%E6%9C%AF/2020-07-29-%E6%89%B9%E9%87%8F%E5%AF%BC%E5%87%BAmysql%E5%A4%9A%E4%B8%AA%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BB%93%E6%9E%84%E5%92%8C%E6%95%B0%E6%8D%AE%E8%84%9A%E6%9C%AC/"/>
    <id>https://ax-codes.github.io/2020/07/29/技术/2020-07-29-批量导出mysql多个数据库结构和数据脚本/</id>
    <published>2020-07-29T12:00:00.000Z</published>
    <updated>2020-08-06T10:01:28.852Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>批量导出 mysql 多个数据库结构和数据脚本</p><h3 id="脚本"><a href="#脚本" class="headerlink" title="脚本"></a>脚本</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">### change the values below where needed.....</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">### 多数据库DBNAMES="MyDb1 MyDb2 MyDb3"</span></span></span><br><span class="line">DBNAMES="IptvOttSqmBJ "</span><br><span class="line">HOST="--host=127.0.0.1"</span><br><span class="line">USER="--user=root"</span><br><span class="line">PASSWORD="--password=test"</span><br><span class="line">BACKUP_DIR="/root/db"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">### you can change these values but they are optional....</span></span></span><br><span class="line">OPTIONS="--default-character-set=utf8 --complete-insert --no-create-info --compact -q"</span><br><span class="line">RESTORESCRIPT="$BACKUP_DIR/__restoreData.sql"</span><br><span class="line">DATE=`/bin/date '+%y%m%d_%H%M%S'`</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">### 分表的数据，暂时只导出最新那个月的数据</span></span></span><br><span class="line">NOW_MONTH=`/bin/date '+%Y%m'`</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">### make no changes after this....</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">### start script ####</span></span></span><br><span class="line">echo removing old temporary files if they exists...</span><br><span class="line">rm -f $&#123;BACKUP_DIR&#125;/*.sql &gt; /dev/null 2&gt;&amp;1</span><br><span class="line">rm -f $&#123;BACKUP_DIR&#125;/*.tar &gt; /dev/null 2&gt;&amp;1</span><br><span class="line">cd $&#123;BACKUP_DIR&#125;</span><br><span class="line"></span><br><span class="line">for DB in $DBNAMES</span><br><span class="line">do</span><br><span class="line">    echo "=========================================="</span><br><span class="line">    echo $&#123;DB&#125;</span><br><span class="line">    echo "=========================================="</span><br><span class="line">    echo 'SET FOREIGN_KEY_CHECKS=0;' &gt;&gt; $RESTORESCRIPT</span><br><span class="line"></span><br><span class="line">    #### 导出表结构</span><br><span class="line">    mysqldump --no-data $HOST $USER $PASSWORD $DB &gt;&gt; $&#123;BACKUP_DIR&#125;/__createTables.sql</span><br><span class="line">    echo 'source __createTables.sql;' &gt;&gt; $RESTORESCRIPT</span><br><span class="line"></span><br><span class="line">    #### 导出表数据</span><br><span class="line">    for TABLE in `mysql $HOST $USER $PASSWORD $DB -e 'show tables' | egrep -v 'Tables_in_' `;</span><br><span class="line">    do</span><br><span class="line">        TABLENAME=$(echo $TABLE|awk '&#123; printf "%s", $0 &#125;')</span><br><span class="line">        FILENAME="$&#123;TABLENAME&#125;.sql"</span><br><span class="line"></span><br><span class="line">        #### 正则忽略 &amp;&amp; 当前月数据忽略</span><br><span class="line">        if [[ $TABLENAME = david_*_tmp ]] || [[ $TABLENAME =~ 'david_trade_detail_' &amp;&amp; $TABLENAME != "david_trade_detail_$&#123;NOW_MONTH&#125;" ]]</span><br><span class="line">        then</span><br><span class="line">            echo $&#123;TABLENAME&#125; '忽略';</span><br><span class="line">            continue</span><br><span class="line">        else</span><br><span class="line">            echo Dumping $&#123;TABLENAME&#125;</span><br><span class="line">            echo 'source ' $BACKUP_DIR'/'$FILENAME';' &gt;&gt; $RESTORESCRIPT</span><br><span class="line">            mysqldump $OPTIONS $HOST $USER $PASSWORD $DB $&#123;TABLENAME&#125; &gt; $&#123;BACKUP_DIR&#125;/$&#123;FILENAME&#125;</span><br><span class="line">        fi</span><br><span class="line">    done</span><br><span class="line"></span><br><span class="line">    #### 压缩</span><br><span class="line">:&lt;&lt;aaa</span><br><span class="line">    echo 'SET FOREIGN_KEY_CHECKS=1;' &gt;&gt; $RESTORESCRIPT</span><br><span class="line"></span><br><span class="line">    echo making tar...</span><br><span class="line">    tar -cf $&#123;DB&#125;_$&#123;DATE&#125;.tar *.sql  &gt; /dev/null 2&gt;&amp;1</span><br><span class="line"></span><br><span class="line">    echo compressing...</span><br><span class="line">    gzip -9 $&#123;DB&#125;_$&#123;DATE&#125;.tar &gt; /dev/null 2&gt;&amp;1</span><br><span class="line"></span><br><span class="line">    echo removing temporary files...</span><br><span class="line">    rm -f $&#123;BACKUP_DIR&#125;/*.sql &gt; /dev/null 2&gt;&amp;1</span><br><span class="line">    rm -f $&#123;BACKUP_DIR&#125;/*.tar &gt; /dev/null 2&gt;&amp;1</span><br><span class="line">aaa</span><br><span class="line"></span><br><span class="line">    echo "done with " $DB</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">echo "=========================================="</span><br><span class="line">echo "            done with all database!       "</span><br><span class="line">echo "=========================================="</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;p&gt;批量导出 mysql 多个数据库结构和数据脚本&lt;/p&gt;
&lt;h3 id=&quot;脚本&quot;&gt;&lt;a href=&quot;#脚本&quot; class=&quot;headerlin
      
    
    </summary>
    
      <category term="技术" scheme="https://ax-codes.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="linux" scheme="https://ax-codes.github.io/tags/linux/"/>
    
      <category term="开发工具/插件" scheme="https://ax-codes.github.io/tags/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7-%E6%8F%92%E4%BB%B6/"/>
    
  </entry>
  
  <entry>
    <title>编写一个vscode插件</title>
    <link href="https://ax-codes.github.io/2020/06/07/%E6%8A%80%E6%9C%AF/2020-06-07-%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AAvscode%E6%8F%92%E4%BB%B6/"/>
    <id>https://ax-codes.github.io/2020/06/07/技术/2020-06-07-编写一个vscode插件/</id>
    <published>2020-06-07T12:00:00.000Z</published>
    <updated>2020-06-10T06:39:03.100Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>vscode 作为现在一个应用最广泛和最强大的 ide 之一,有时候我们需要自己定制一些插件来提高我们的工作效率;<br>这里我已经开发了一个用于 hexo 的自动生成粘贴图片的插件,踩了一点坑,这里特意记录下来<br>插件地址:<a href="https://github.com/ax-codes/hexo-paste" target="_blank" rel="noopener">https://github.com/ax-codes/hexo-paste</a></p><p>官方 api 文档:<a href="https://code.visualstudio.com/api" target="_blank" rel="noopener">https://code.visualstudio.com/api</a><br>更加详细的中文文档:<a href="https://www.cnblogs.com/liuxianan/p/vscode-plugin-overview.html(作者还一篇谷歌插件开发文章:http://blog.haoji.me/chrome-plugin-develop.html#da-bao-yu-fa-bu)" target="_blank" rel="noopener">https://www.cnblogs.com/liuxianan/p/vscode-plugin-overview.html(作者还一篇谷歌插件开发文章:http://blog.haoji.me/chrome-plugin-develop.html#da-bao-yu-fa-bu)</a><br>我的 demo 例子:<a href="https://github.com/ax-codes/hexo-paste" target="_blank" rel="noopener">https://github.com/ax-codes/hexo-paste</a></p><h3 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h3><p>mac<br>vscode<br>nodejs</p><h3 id="开发语言"><a href="#开发语言" class="headerlink" title="开发语言"></a>开发语言</h3><p>typescript</p><h3 id="安装-vscode-插件脚手架和打包工具"><a href="#安装-vscode-插件脚手架和打包工具" class="headerlink" title="安装 vscode 插件脚手架和打包工具"></a>安装 vscode 插件脚手架和打包工具</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install -g yo generator-code</span><br><span class="line">npm i vsce -g</span><br></pre></td></tr></table></figure><h3 id="使用脚手架生成框架"><a href="#使用脚手架生成框架" class="headerlink" title="使用脚手架生成框架"></a>使用脚手架生成框架</h3><p>执行下面命令</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yo code</span><br></pre></td></tr></table></figure><p>可以看到生成下面框架<br><img src="/2020/06/07/%E6%8A%80%E6%9C%AF/2020-06-07-%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AAvscode%E6%8F%92%E4%BB%B6/84e939f3-e6e9-4ecd-853c-c7868d55e269.png" alt="84e939f3-e6e9-4ecd-853c-c7868d55e269"></p><h4 id="package-json-文件描述"><a href="#package-json-文件描述" class="headerlink" title="package.json 文件描述"></a>package.json 文件描述</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="comment">//插件的名字,应全部小写,不能有空格</span></span><br><span class="line">  <span class="attr">"name"</span>: <span class="string">"hexo-paste"</span>,</span><br><span class="line">  <span class="comment">//插件别名,支持中文</span></span><br><span class="line">  <span class="attr">"displayName"</span>: <span class="string">"hexo-paste"</span>,</span><br><span class="line">  <span class="comment">//描述</span></span><br><span class="line">  <span class="attr">"description"</span>: <span class="string">""</span>,</span><br><span class="line">  <span class="comment">//关键字,用作应用市场搜索</span></span><br><span class="line">  <span class="attr">"keywords"</span>: [<span class="string">"hexo"</span>, <span class="string">"plugin"</span>, <span class="string">"vscode"</span>],</span><br><span class="line">  <span class="comment">//版本</span></span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"0.0.1"</span>,</span><br><span class="line">  <span class="comment">//表示该插件适配的最低vscode版本</span></span><br><span class="line">  <span class="attr">"engines"</span>: &#123;</span><br><span class="line">    <span class="attr">"vscode"</span>: <span class="string">"^1.45.0"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//插件应用市场分类,可选值： [Programming Languages, Snippets, Linters, Themes, Debuggers, Formatters, Keymaps, SCM Providers, Other, Extension Packs, Language Packs]</span></span><br><span class="line">  <span class="attr">"categories"</span>: [<span class="string">"Other"</span>],</span><br><span class="line">  <span class="comment">//发布者,如果要发布到应用市场的话,这个名字必须与发布者一致</span></span><br><span class="line">  <span class="attr">"publisher"</span>: <span class="string">"ax-codes"</span>,</span><br><span class="line">  <span class="comment">//图标 需要带上下面的reponsitory,不然会报这个错‘An icon requires a repository with HTTPS protocol to be specified in this package.json.’</span></span><br><span class="line">  <span class="attr">"icon"</span>: <span class="string">"res/logo.png"</span>,</span><br><span class="line">  <span class="attr">"repository"</span>: &#123;</span><br><span class="line">    <span class="attr">"type"</span>: <span class="string">"git"</span>,</span><br><span class="line">    <span class="attr">"url"</span>: <span class="string">"https://github.com/ax-codes/hexo-paste"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//激活事件</span></span><br><span class="line">  <span class="attr">"activationEvents"</span>: [</span><br><span class="line">    <span class="string">"onCommand:extension.pasteImage"</span>, <span class="comment">//直接执行命令</span></span><br><span class="line">    <span class="string">"onLanguage:markdown"</span> <span class="comment">//定义需要执行插件逻辑的语言 可以js py...</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="comment">//插件的主入口</span></span><br><span class="line">  <span class="attr">"main"</span>: <span class="string">"./out/extension.js"</span>,</span><br><span class="line">  <span class="comment">//插件配置项</span></span><br><span class="line">  <span class="attr">"contributes"</span>: &#123;</span><br><span class="line">    <span class="comment">//直接执行命令</span></span><br><span class="line">    <span class="attr">"commands"</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"command"</span>: <span class="string">"extension.pasteImage"</span>,</span><br><span class="line">        <span class="attr">"title"</span>: <span class="string">"Paste Image"</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="comment">//快捷键命令</span></span><br><span class="line">    <span class="attr">"keybindings"</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"command"</span>: <span class="string">"extension.pasteImage"</span>,</span><br><span class="line">        <span class="attr">"key"</span>: <span class="string">"ctrl+alt+v"</span>,</span><br><span class="line">        <span class="attr">"mac"</span>: <span class="string">"cmd+alt+v"</span>,</span><br><span class="line">        <span class="attr">"when"</span>: <span class="string">"editorTextFocus &amp;&amp; editorLangId == markdown"</span> <span class="comment">//表示文件编辑并且必须要是markdown才回处理</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"scripts"</span>: &#123;</span><br><span class="line">    <span class="attr">"vscode:prepublish"</span>: <span class="string">"yarn run compile"</span>,</span><br><span class="line">    <span class="attr">"compile"</span>: <span class="string">"tsc -p ./"</span>,</span><br><span class="line">    <span class="attr">"lint"</span>: <span class="string">"eslint src --ext ts"</span>,</span><br><span class="line">    <span class="attr">"watch"</span>: <span class="string">"tsc -watch -p ./"</span>,</span><br><span class="line">    <span class="attr">"pretest"</span>: <span class="string">"yarn run compile &amp;&amp; yarn run lint"</span>,</span><br><span class="line">    <span class="attr">"test"</span>: <span class="string">"node ./out/test/runTest.js"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"devDependencies"</span>: &#123;</span><br><span class="line">    <span class="attr">"@types/glob"</span>: <span class="string">"^7.1.1"</span>,</span><br><span class="line">    <span class="attr">"@types/mocha"</span>: <span class="string">"^7.0.2"</span>,</span><br><span class="line">    <span class="attr">"@types/node"</span>: <span class="string">"^13.11.0"</span>,</span><br><span class="line">    <span class="attr">"@types/vscode"</span>: <span class="string">"^1.45.0"</span>,</span><br><span class="line">    <span class="attr">"@typescript-eslint/eslint-plugin"</span>: <span class="string">"^2.30.0"</span>,</span><br><span class="line">    <span class="attr">"@typescript-eslint/parser"</span>: <span class="string">"^2.30.0"</span>,</span><br><span class="line">    <span class="attr">"eslint"</span>: <span class="string">"^6.8.0"</span>,</span><br><span class="line">    <span class="attr">"glob"</span>: <span class="string">"^7.1.6"</span>,</span><br><span class="line">    <span class="attr">"mocha"</span>: <span class="string">"^7.1.2"</span>,</span><br><span class="line">    <span class="attr">"typescript"</span>: <span class="string">"^3.8.3"</span>,</span><br><span class="line">    <span class="attr">"vscode-test"</span>: <span class="string">"^1.3.0"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"dependencies"</span>: &#123;</span><br><span class="line">    <span class="attr">"@types/fs-extra"</span>: <span class="string">"^9.0.1"</span>,</span><br><span class="line">    <span class="attr">"@types/uuid"</span>: <span class="string">"^8.0.0"</span>,</span><br><span class="line">    <span class="attr">"fs-extra"</span>: <span class="string">"^9.0.1"</span>,</span><br><span class="line">    <span class="attr">"moment"</span>: <span class="string">"^2.26.0"</span>,</span><br><span class="line">    <span class="attr">"upath"</span>: <span class="string">"^1.2.0"</span>,</span><br><span class="line">    <span class="attr">"uuid"</span>: <span class="string">"^8.1.0"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="extension-ts-文件描述"><a href="#extension-ts-文件描述" class="headerlink" title="extension.ts 文件描述"></a>extension.ts 文件描述</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// this method is called when your extension is activated</span></span><br><span class="line"><span class="comment">// your extension is activated the very first time the command is executed</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">activate</span>(<span class="params">context: vscode.ExtensionContext</span>) </span>&#123;</span><br><span class="line">  Logger.channel = vscode.window.createOutputChannel(<span class="string">"PasteImage"</span>);</span><br><span class="line">  context.subscriptions.push(Logger.channel);</span><br><span class="line">  Logger.log(</span><br><span class="line">    <span class="string">'Congratulations, your extension "vscode-paste-image" is now active!'</span></span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="comment">// The command has been defined in the package.json file</span></span><br><span class="line">  <span class="comment">// Now provide the implementation of the command with registerCommand</span></span><br><span class="line">  <span class="comment">// The commandId parameter must match the command field in package.json</span></span><br><span class="line">  <span class="keyword">let</span> disposable = vscode.commands.registerCommand(</span><br><span class="line">    <span class="string">"extension.pasteImage"</span>,</span><br><span class="line">    () =&gt; &#123;</span><br><span class="line">      <span class="comment">//命令执行处理逻辑</span></span><br><span class="line">    &#125;</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  context.subscriptions.push(disposable);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="打包"><a href="#打包" class="headerlink" title="打包"></a>打包</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vsce package</span><br></pre></td></tr></table></figure><h4 id="提示没有修改-README-md-文件报错"><a href="#提示没有修改-README-md-文件报错" class="headerlink" title="提示没有修改 README.md 文件报错"></a>提示没有修改 README.md 文件报错</h4><p><img src="/2020/06/07/%E6%8A%80%E6%9C%AF/2020-06-07-%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AAvscode%E6%8F%92%E4%BB%B6/223dd58e-0469-4767-9bae-6d2431595a61.png" alt="223dd58e-0469-4767-9bae-6d2431595a61"></p><h5 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h5><p>修改对应的 markdown 描述<br><img src="/2020/06/07/%E6%8A%80%E6%9C%AF/2020-06-07-%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AAvscode%E6%8F%92%E4%BB%B6/d338a43b-f876-4cd1-893e-822624a558a3.png" alt="d338a43b-f876-4cd1-893e-822624a558a3"></p><h4 id="icon-报错"><a href="#icon-报错" class="headerlink" title="icon 报错"></a>icon 报错</h4><p><img src="/2020/06/07/%E6%8A%80%E6%9C%AF/2020-06-07-%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AAvscode%E6%8F%92%E4%BB%B6/ab558c75-0384-4f26-b1db-a6b83944b213.png" alt="ab558c75-0384-4f26-b1db-a6b83944b213"></p><h4 id="解决-1"><a href="#解决-1" class="headerlink" title="解决"></a>解决</h4><p><img src="/2020/06/07/%E6%8A%80%E6%9C%AF/2020-06-07-%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AAvscode%E6%8F%92%E4%BB%B6/29a56432-a80a-43e1-b80c-28b5c3623822.png" alt="29a56432-a80a-43e1-b80c-28b5c3623822"></p><p>在 icon 下加上对应的仓库</p><h4 id="打包成功和安装"><a href="#打包成功和安装" class="headerlink" title="打包成功和安装"></a>打包成功和安装</h4><p><img src="/2020/06/07/%E6%8A%80%E6%9C%AF/2020-06-07-%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AAvscode%E6%8F%92%E4%BB%B6/d49f30ff-7358-41e0-968c-7be0a0fc2c06.png" alt="d49f30ff-7358-41e0-968c-7be0a0fc2c06"></p><p><img src="/2020/06/07/%E6%8A%80%E6%9C%AF/2020-06-07-%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AAvscode%E6%8F%92%E4%BB%B6/22b6bf6a-3aa5-424f-bff6-f8d9fad76706.png" alt="22b6bf6a-3aa5-424f-bff6-f8d9fad76706"></p><h4 id="备注"><a href="#备注" class="headerlink" title="备注"></a>备注</h4><h5 id="默认生成的-package-json-里没有-publisher-需要加上-如果要发布到应用市场的话-这个名字必须与发布者一致"><a href="#默认生成的-package-json-里没有-publisher-需要加上-如果要发布到应用市场的话-这个名字必须与发布者一致" class="headerlink" title="默认生成的 package.json 里没有 publisher,需要加上,如果要发布到应用市场的话,这个名字必须与发布者一致"></a>默认生成的 package.json 里没有 publisher,需要加上,如果要发布到应用市场的话,这个名字必须与发布者一致</h5>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;p&gt;vscode 作为现在一个应用最广泛和最强大的 ide 之一,有时候我们需要自己定制一些插件来提高我们的工作效率;&lt;br&gt;这里我已经开发了一
      
    
    </summary>
    
      <category term="技术" scheme="https://ax-codes.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="开发工具/插件" scheme="https://ax-codes.github.io/tags/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7-%E6%8F%92%E4%BB%B6/"/>
    
      <category term="效率工具/插件" scheme="https://ax-codes.github.io/tags/%E6%95%88%E7%8E%87%E5%B7%A5%E5%85%B7-%E6%8F%92%E4%BB%B6/"/>
    
      <category term="其他工具/插件" scheme="https://ax-codes.github.io/tags/%E5%85%B6%E4%BB%96%E5%B7%A5%E5%85%B7-%E6%8F%92%E4%BB%B6/"/>
    
      <category term="js" scheme="https://ax-codes.github.io/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>antd webpack 运行时切换主题</title>
    <link href="https://ax-codes.github.io/2020/06/05/%E6%8A%80%E6%9C%AF/2020-06-05-antd%20webpack%20%E8%BF%90%E8%A1%8C%E6%97%B6%E5%88%87%E6%8D%A2%E4%B8%BB%E9%A2%98/"/>
    <id>https://ax-codes.github.io/2020/06/05/技术/2020-06-05-antd webpack 运行时切换主题/</id>
    <published>2020-06-05T12:00:00.000Z</published>
    <updated>2020-06-09T10:00:01.845Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>antd 版本:^4.1.4(和高版本没关系,我升级到最新版本样式适配到还是不怎么好)<br>antd-theme-webpack-plugin:版本^1.3.4</p><p>antd 4.0 以后引入了黑夜主题,因为觉得加上主题切换会让系统显得高级一点,所以在此记录一下</p><h3 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tyarn add antd-theme-webpack-plugin antd-theme-generator -D</span><br></pre></td></tr></table></figure><p>备注:安装到开发环境就行</p><h3 id="webpack-配置"><a href="#webpack-配置" class="headerlink" title="webpack 配置"></a>webpack 配置</h3><h3 id="引入文件"><a href="#引入文件" class="headerlink" title="引入文件"></a>引入文件</h3><p><img src="/2020/06/05/%E6%8A%80%E6%9C%AF/2020-06-05-antd%20webpack%20%E8%BF%90%E8%A1%8C%E6%97%B6%E5%88%87%E6%8D%A2%E4%B8%BB%E9%A2%98/414d0722-3f9e-4bee-805e-4753daa47408.png" alt="414d0722-3f9e-4bee-805e-4753daa47408"><br>这几个文件可以这里下载:<a href="https://github.com/mzohaibqc/antd-theme-webpack-plugin/tree/master/examples/customize-cra/src" target="_blank" rel="noopener">https://github.com/mzohaibqc/antd-theme-webpack-plugin/tree/master/examples/customize-cra/src</a></p><h4 id="定义配置"><a href="#定义配置" class="headerlink" title="定义配置"></a>定义配置</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// eslint-disable-next-line @typescript-eslint/no-var-requires</span></span><br><span class="line"><span class="keyword">const</span> AntDesignThemePlugin = <span class="built_in">require</span>(<span class="string">"antd-theme-webpack-plugin"</span>);</span><br><span class="line"><span class="comment">// eslint-disable-next-line @typescript-eslint/no-var-requires</span></span><br><span class="line"><span class="keyword">const</span> &#123; getLessVars &#125; = <span class="built_in">require</span>(<span class="string">"antd-theme-generator"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> themeVariables = getLessVars(</span><br><span class="line">  resolve(PROJECT_ROOT, <span class="string">"./src/assets/styles/vars.less"</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">const</span> defaultVars = getLessVars(</span><br><span class="line">  <span class="string">"./node_modules/antd/lib/style/themes/default.less"</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">const</span> darkVars = &#123;</span><br><span class="line">  ...getLessVars(<span class="string">"./node_modules/antd/lib/style/themes/dark.less"</span>),</span><br><span class="line">  <span class="string">"@primary-color"</span>: defaultVars[<span class="string">"@primary-color"</span>],</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> lightVars = &#123;</span><br><span class="line">  ...getLessVars(<span class="string">"./node_modules/antd/lib/style/themes/compact.less"</span>),</span><br><span class="line">  <span class="string">"@primary-color"</span>: defaultVars[<span class="string">"@primary-color"</span>],</span><br><span class="line">&#125;;</span><br><span class="line">fs.writeFileSync(<span class="string">"./src/assets/dark.json"</span>, <span class="built_in">JSON</span>.stringify(darkVars));</span><br><span class="line">fs.writeFileSync(<span class="string">"./src/assets/light.json"</span>, <span class="built_in">JSON</span>.stringify(lightVars));</span><br><span class="line">fs.writeFileSync(<span class="string">"./src/assets/theme.json"</span>, <span class="built_in">JSON</span>.stringify(themeVariables));</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> options = &#123;</span><br><span class="line">  stylesDir: resolve(PROJECT_ROOT, <span class="string">"./src/assets/"</span>),</span><br><span class="line">  antDir: resolve(PROJECT_ROOT, <span class="string">"./node_modules/antd"</span>),</span><br><span class="line">  varFile: resolve(PROJECT_ROOT, <span class="string">"./src/assets/styles/vars.less"</span>),</span><br><span class="line">  themeVariables: [</span><br><span class="line">    ...new <span class="built_in">Set</span>([</span><br><span class="line">      ...Object.keys(darkVars),</span><br><span class="line">      ...Object.keys(lightVars),</span><br><span class="line">      ...Object.keys(themeVariables),</span><br><span class="line">    ]),</span><br><span class="line">  ],</span><br><span class="line">  generateOnce: <span class="literal">false</span>, <span class="comment">// generate color.less on each compilation</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="webpack-安装插件"><a href="#webpack-安装插件" class="headerlink" title="webpack 安装插件"></a>webpack 安装插件</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> AntDesignThemePlugin(options); <span class="comment">//引用上面定义到options</span></span><br></pre></td></tr></table></figure><h3 id="less-loader-加载器关闭-javascript"><a href="#less-loader-加载器关闭-javascript" class="headerlink" title="less-loader 加载器关闭 javascript"></a>less-loader 加载器关闭 javascript</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  javascriptEnabled: <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>eg:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    test: <span class="regexp">/\.less$/</span>,</span><br><span class="line">    exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">    use: [</span><br><span class="line">        ...getCssLoaders(<span class="number">2</span>, <span class="literal">true</span>),</span><br><span class="line">        &#123;</span><br><span class="line">            loader: <span class="string">'less-loader'</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">                javascriptEnabled: <span class="literal">true</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">    ],</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h3 id="index-html-添加脚本"><a href="#index-html-添加脚本" class="headerlink" title="index.html 添加脚本"></a>index.html 添加脚本</h3><p>在你的 html 主体文件 body 里开头添加下列代码(一般 webpack 主体文件都是 public 里的 index.html)</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet/less"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">href</span>=<span class="string">"/color.less"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="built_in">window</span>.less = &#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">async</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="actionscript">    env: <span class="string">"production"</span>,</span></span><br><span class="line">  &#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span></span></span><br><span class="line"><span class="tag">  <span class="attr">type</span>=<span class="string">"text/javascript"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">src</span>=<span class="string">"https://cdnjs.cloudflare.com/ajax/libs/less.js/2.7.2/less.min.js"</span></span></span><br><span class="line"><span class="tag">&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="添加动态切换逻辑代码"><a href="#添加动态切换逻辑代码" class="headerlink" title="添加动态切换逻辑代码"></a>添加动态切换逻辑代码</h3><h4 id="引入前面加入的对应-json-文件-比如黑色主题就是-dark-json"><a href="#引入前面加入的对应-json-文件-比如黑色主题就是-dark-json" class="headerlink" title="引入前面加入的对应 json 文件,比如黑色主题就是 dark.json"></a>引入前面加入的对应 json 文件,比如黑色主题就是 dark.json</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> darkVars <span class="keyword">from</span> <span class="string">"@/assets/dark.json"</span>;</span><br></pre></td></tr></table></figure><h4 id="添加切换主题逻辑-使用上面引入的-json-文件进行主题切换"><a href="#添加切换主题逻辑-使用上面引入的-json-文件进行主题切换" class="headerlink" title="添加切换主题逻辑,使用上面引入的 json 文件进行主题切换"></a>添加切换主题逻辑,使用上面引入的 json 文件进行主题切换</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.less</span><br><span class="line">  .modifyVars(darkVars)</span><br><span class="line">  .then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    message.success(<span class="string">"切换主题成功"</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    message.error(<span class="string">`切换主题失败`</span>);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><h4 id="最终效果"><a href="#最终效果" class="headerlink" title="最终效果"></a>最终效果</h4><p><img src="/2020/06/05/%E6%8A%80%E6%9C%AF/2020-06-05-antd%20webpack%20%E8%BF%90%E8%A1%8C%E6%97%B6%E5%88%87%E6%8D%A2%E4%B8%BB%E9%A2%98/6009a5fd-7e35-41f4-8f43-e317dcd826aa.png" alt="6009a5fd-7e35-41f4-8f43-e317dcd826aa"></p><h4 id="备注"><a href="#备注" class="headerlink" title="备注"></a>备注</h4><p>以后加样式的适合要注意各种主题都要测试,有些没有的样式可能需要自定义适配</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;p&gt;antd 版本:^4.1.4(和高版本没关系,我升级到最新版本样式适配到还是不怎么好)&lt;br&gt;antd-theme-webpack-plug
      
    
    </summary>
    
      <category term="技术" scheme="https://ax-codes.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="开发工具/插件" scheme="https://ax-codes.github.io/tags/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7-%E6%8F%92%E4%BB%B6/"/>
    
      <category term="js" scheme="https://ax-codes.github.io/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>ubuntu安装airflow</title>
    <link href="https://ax-codes.github.io/2020/05/25/%E6%8A%80%E6%9C%AF/2020-05-25-ubuntu%E5%AE%89%E8%A3%85airflow/"/>
    <id>https://ax-codes.github.io/2020/05/25/技术/2020-05-25-ubuntu安装airflow/</id>
    <published>2020-05-25T12:00:00.000Z</published>
    <updated>2020-06-09T10:00:01.845Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>airflow 是一个工作流功能的任务框架<br>airflow 官网:<a href="http://airflow.apache.org/docs/stable/start.html" target="_blank" rel="noopener">http://airflow.apache.org/docs/stable/start.html</a></p><h3 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h3><p>环境:windows 子 liunx 系统<br>系统版本:ubuntu 02<br>python 版本:3.8.2</p><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># but you can lay foundation somewhere else if you prefer</span><br><span class="line"># (optional)</span><br><span class="line">export AIRFLOW_HOME&#x3D;~&#x2F;airflow</span><br><span class="line"></span><br><span class="line"># install from pypi using pip</span><br><span class="line">pip install apache-airflow</span><br><span class="line"></span><br><span class="line"># initialize the database</span><br><span class="line">airflow initdb</span><br><span class="line"></span><br><span class="line"># start the web server, default port is 8080</span><br><span class="line">airflow webserver -p 8080</span><br><span class="line"></span><br><span class="line"># start the scheduler</span><br><span class="line">airflow scheduler</span><br><span class="line"></span><br><span class="line"># visit localhost:8080 in the browser and enable the example dag in the home page</span><br></pre></td></tr></table></figure><h3 id="报错"><a href="#报错" class="headerlink" title="报错"></a>报错</h3><h4 id="airflow-安装-psutil-的时候报错"><a href="#airflow-安装-psutil-的时候报错" class="headerlink" title="airflow 安装 psutil 的时候报错"></a>airflow 安装 psutil 的时候报错</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Failed building wheel for psutil</span><br><span class="line">error: command &#39;x86_64-linux-gnu-gcc&#39; failed with exit status 1</span><br></pre></td></tr></table></figure><h5 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pip install Scrapy</span><br><span class="line">pip install virtualenv</span><br><span class="line">apt-get install python2.7 python2.7-dev or apt-get install python3 python3-dev(根据你对应的python版本)</span><br></pre></td></tr></table></figure><h4 id="airflow-安装-mysql-插件时候报错"><a href="#airflow-安装-mysql-插件时候报错" class="headerlink" title="airflow 安装 mysql 插件时候报错"></a>airflow 安装 mysql 插件时候报错</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;bin&#x2F;sh: 1: mysql_config: not found</span><br></pre></td></tr></table></figure><h5 id="解决-1"><a href="#解决-1" class="headerlink" title="解决"></a>解决</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install libmysqlclient-dev</span><br></pre></td></tr></table></figure><h4 id="python-airflow-启动报错"><a href="#python-airflow-启动报错" class="headerlink" title="python airflow 启动报错"></a>python airflow 启动报错</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ModuleNotFoundError: No module named &#39;typing_extensions&#39;</span><br></pre></td></tr></table></figure><h5 id="解决-2"><a href="#解决-2" class="headerlink" title="解决"></a>解决</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install typing_extensions</span><br></pre></td></tr></table></figure><h4 id="airflow-webserver-p-8080-运行报错"><a href="#airflow-webserver-p-8080-运行报错" class="headerlink" title="airflow webserver -p 8080 运行报错"></a>airflow webserver -p 8080 运行报错</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FileNotFoundError: [Errno 2] No such file or directory: &#39;gunicorn&#39;</span><br></pre></td></tr></table></figure><h5 id="解决-3"><a href="#解决-3" class="headerlink" title="解决"></a>解决</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install gunicorn</span><br><span class="line">pip install gunicorn</span><br></pre></td></tr></table></figure><h3 id="备注"><a href="#备注" class="headerlink" title="备注"></a>备注</h3><p>将 python3 修改成默认 python 执行</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo update-alternatives --install &#x2F;usr&#x2F;bin&#x2F;python python &#x2F;usr&#x2F;bin&#x2F;python3 150</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;p&gt;airflow 是一个工作流功能的任务框架&lt;br&gt;airflow 官网:&lt;a href=&quot;http://airflow.apache.org
      
    
    </summary>
    
      <category term="技术" scheme="https://ax-codes.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="开发工具/插件" scheme="https://ax-codes.github.io/tags/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7-%E6%8F%92%E4%BB%B6/"/>
    
      <category term="python" scheme="https://ax-codes.github.io/tags/python/"/>
    
      <category term="效率工具/插件" scheme="https://ax-codes.github.io/tags/%E6%95%88%E7%8E%87%E5%B7%A5%E5%85%B7-%E6%8F%92%E4%BB%B6/"/>
    
      <category term="其他工具/插件" scheme="https://ax-codes.github.io/tags/%E5%85%B6%E4%BB%96%E5%B7%A5%E5%85%B7-%E6%8F%92%E4%BB%B6/"/>
    
  </entry>
  
  <entry>
    <title>express session存内存demo</title>
    <link href="https://ax-codes.github.io/2020/05/24/%E6%8A%80%E6%9C%AF/2020-05-24-express%20session%E5%AD%98%E5%86%85%E5%AD%98demo/"/>
    <id>https://ax-codes.github.io/2020/05/24/技术/2020-05-24-express session存内存demo/</id>
    <published>2020-05-24T12:00:00.000Z</published>
    <updated>2020-06-09T10:00:01.844Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>express session 存内存 demo</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">"express"</span>);</span><br><span class="line"><span class="keyword">var</span> app = express();</span><br><span class="line"><span class="keyword">var</span> cookieParser = <span class="built_in">require</span>(<span class="string">"cookie-parser"</span>);</span><br><span class="line"><span class="keyword">var</span> session = <span class="built_in">require</span>(<span class="string">"express-session"</span>);</span><br><span class="line"></span><br><span class="line">app.use(cookieParser());</span><br><span class="line">app.use(</span><br><span class="line">  session(&#123;</span><br><span class="line">    secret: <span class="string">"12345"</span>,</span><br><span class="line">    name: <span class="string">"name"</span>,</span><br><span class="line">    cookie: &#123; <span class="attr">maxAge</span>: <span class="number">60000</span> &#125;,</span><br><span class="line">    resave: <span class="literal">false</span>,</span><br><span class="line">    saveUninitialized: <span class="literal">true</span>,</span><br><span class="line">  &#125;)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">"/set_session"</span>, <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  req.session.name = <span class="string">"ax"</span>;</span><br><span class="line">  <span class="keyword">return</span> res.json(&#123; <span class="attr">data</span>: <span class="string">"设置session成功"</span> &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">"/get_session"</span>, <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> name = req.session.name;</span><br><span class="line">  <span class="keyword">return</span> res.json(&#123; <span class="attr">data</span>: <span class="string">`session value = <span class="subst">$&#123;name&#125;</span>`</span> &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> server = app.listen(<span class="number">9001</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> host = server.address().address;</span><br><span class="line">  <span class="keyword">var</span> port = server.address().port;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"应用实例，访问地址为 http://%s:%s"</span>, host, port);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;p&gt;express session 存内存 demo&lt;/p&gt;
&lt;h3 id=&quot;代码&quot;&gt;&lt;a href=&quot;#代码&quot; class=&quot;headerli
      
    
    </summary>
    
      <category term="技术" scheme="https://ax-codes.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="js" scheme="https://ax-codes.github.io/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>nginx部署vue或react应用,并设置代理</title>
    <link href="https://ax-codes.github.io/2020/05/01/%E6%8A%80%E6%9C%AF/2020-05-01-nginx%E9%83%A8%E7%BD%B2vue%E6%88%96react%E5%BA%94%E7%94%A8,%E5%B9%B6%E8%AE%BE%E7%BD%AE%E4%BB%A3%E7%90%86/"/>
    <id>https://ax-codes.github.io/2020/05/01/技术/2020-05-01-nginx部署vue或react应用,并设置代理/</id>
    <published>2020-05-01T12:00:00.000Z</published>
    <updated>2020-06-09T10:00:01.843Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>nginx 部署 vue 或 react 应用,并设置代理</p><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">        listen       9000;</span><br><span class="line">        server_name  localhost;</span><br><span class="line">        location /&#123;</span><br><span class="line">            root   F:/learning/webpack/react-typescript-boilerplate/dist;//react编译的dist包路径</span><br><span class="line">            index  index.html index.htm;</span><br><span class="line">            try_files $uri $uri/ /index.html =404;</span><br><span class="line">        &#125;</span><br><span class="line">        location /api/ &#123;</span><br><span class="line">              proxy_pass http://127.0.0.1:3000/api/;#转发请求的地址</span><br><span class="line">              proxy_connect_timeout 6000;#链接超时设置</span><br><span class="line">              proxy_read_timeout 6000;#访问接口超时设置</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="重启-nginx"><a href="#重启-nginx" class="headerlink" title="重启 nginx"></a>重启 nginx</h3>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;p&gt;nginx 部署 vue 或 react 应用,并设置代理&lt;/p&gt;
&lt;h3 id=&quot;配置&quot;&gt;&lt;a href=&quot;#配置&quot; class=&quot;hea
      
    
    </summary>
    
      <category term="技术" scheme="https://ax-codes.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="开发工具/插件" scheme="https://ax-codes.github.io/tags/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7-%E6%8F%92%E4%BB%B6/"/>
    
      <category term="效率工具/插件" scheme="https://ax-codes.github.io/tags/%E6%95%88%E7%8E%87%E5%B7%A5%E5%85%B7-%E6%8F%92%E4%BB%B6/"/>
    
      <category term="其他工具/插件" scheme="https://ax-codes.github.io/tags/%E5%85%B6%E4%BB%96%E5%B7%A5%E5%85%B7-%E6%8F%92%E4%BB%B6/"/>
    
      <category term="js" scheme="https://ax-codes.github.io/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>yarn脚手架或者包找不到问题</title>
    <link href="https://ax-codes.github.io/2020/03/20/%E6%8A%80%E6%9C%AF/2020-03-18-yarn%E8%84%9A%E6%89%8B%E6%9E%B6%E6%88%96%E8%80%85%E5%8C%85%E6%89%BE%E4%B8%8D%E5%88%B0%E9%97%AE%E9%A2%98/"/>
    <id>https://ax-codes.github.io/2020/03/20/技术/2020-03-18-yarn脚手架或者包找不到问题/</id>
    <published>2020-03-20T12:00:00.000Z</published>
    <updated>2020-06-09T10:00:01.840Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>yarn yarn 脚手架或者包找不到问题,原因是我们的 yarn 的 bin 路径没有加到环境变量,所以系统找不到,而我们的 npm 默认安装就已经加了的,所以 npm 可以</p><h3 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h3><p>把 yarn global bin 的路径加到系统环境变量中</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">F:\blog&gt;tyarn global bin</span><br><span class="line">C:\Users\10697\AppData\Local\Yarn\bin</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;p&gt;yarn yarn 脚手架或者包找不到问题,原因是我们的 yarn 的 bin 路径没有加到环境变量,所以系统找不到,而我们的 npm 默认
      
    
    </summary>
    
      <category term="技术" scheme="https://ax-codes.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="开发工具/插件" scheme="https://ax-codes.github.io/tags/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7-%E6%8F%92%E4%BB%B6/"/>
    
      <category term="效率工具/插件" scheme="https://ax-codes.github.io/tags/%E6%95%88%E7%8E%87%E5%B7%A5%E5%85%B7-%E6%8F%92%E4%BB%B6/"/>
    
      <category term="其他工具/插件" scheme="https://ax-codes.github.io/tags/%E5%85%B6%E4%BB%96%E5%B7%A5%E5%85%B7-%E6%8F%92%E4%BB%B6/"/>
    
      <category term="js" scheme="https://ax-codes.github.io/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>dva history报错问题</title>
    <link href="https://ax-codes.github.io/2020/03/19/%E6%8A%80%E6%9C%AF/2020-03-19-dva%20history%E6%8A%A5%E9%94%99%E9%97%AE%E9%A2%98/"/>
    <id>https://ax-codes.github.io/2020/03/19/技术/2020-03-19-dva history报错问题/</id>
    <published>2020-03-19T12:00:00.000Z</published>
    <updated>2020-06-09T10:00:01.841Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>dva 版本:2.4.1</p><p>在项目配置好 dva 后,启动看到浏览器控制台报下面错误</p><h3 id="waring-log"><a href="#waring-log" class="headerlink" title="waring log"></a>waring log</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">index.js:1 Warning: Please use &#96;require(&quot;history&quot;).createHashHistory&#96; instead of &#96;require(&quot;history&#x2F;createHashHistory&quot;)&#96;. Support for the latter will be removed in the next major release.</span><br></pre></td></tr></table></figure><h3 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h3><p>修改 dva 包的 lib 里的 index.js 里的 require(“history/createHashHistory”) 修改成 require(“history”).createHashHistory;如下图<br><img src="/2020/03/19/%E6%8A%80%E6%9C%AF/2020-03-19-dva%20history%E6%8A%A5%E9%94%99%E9%97%AE%E9%A2%98/1.jpg" alt="1.jpg"></p><p>暂时只能这样解决</p><h4 id="重启"><a href="#重启" class="headerlink" title="重启"></a>重启</h4>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;p&gt;dva 版本:2.4.1&lt;/p&gt;
&lt;p&gt;在项目配置好 dva 后,启动看到浏览器控制台报下面错误&lt;/p&gt;
&lt;h3 id=&quot;waring-lo
      
    
    </summary>
    
      <category term="技术" scheme="https://ax-codes.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="js" scheme="https://ax-codes.github.io/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>react a标签eslint问题</title>
    <link href="https://ax-codes.github.io/2020/03/18/%E6%8A%80%E6%9C%AF/2020-03-18-react%20a%E6%A0%87%E7%AD%BEeslint%E9%97%AE%E9%A2%98/"/>
    <id>https://ax-codes.github.io/2020/03/18/技术/2020-03-18-react a标签eslint问题/</id>
    <published>2020-03-18T12:00:00.000Z</published>
    <updated>2020-06-09T10:00:01.840Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>react a 标签 eslint 问题</p><h3 id="waring-log"><a href="#waring-log" class="headerlink" title="waring log"></a>waring log</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">  Line 10:33:  The href attribute requires a valid value to be accessible. Provide a valid, navigable address as the href value. If you cannot provide a valid href, but still need the element to resemble a</span><br><span class="line">link, use a button and change it with appropriate styles. Learn more: https:&#x2F;&#x2F;github.com&#x2F;evcohen&#x2F;eslint-plugin-jsx-a11y&#x2F;blob&#x2F;master&#x2F;docs&#x2F;rules&#x2F;anchor-is-valid.md         jsx-a11y&#x2F;anchor-is-valid</span><br></pre></td></tr></table></figure><h3 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h3><h4 id="在-eslint-的配置加上的-rules-加上"><a href="#在-eslint-的配置加上的-rules-加上" class="headerlink" title="在 eslint 的配置加上的 rules 加上"></a>在 eslint 的配置加上的 rules 加上</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;jsx-a11y&#x2F;anchor-is-valid&quot;: &quot;off&quot;</span><br></pre></td></tr></table></figure><p>例如我的 create-react-app 项目的.eslintrc.json 的配置是:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"extends"</span>: <span class="string">"react-app"</span>,</span><br><span class="line">  <span class="attr">"rules"</span>: &#123;</span><br><span class="line">    <span class="attr">"jsx-a11y/anchor-is-valid"</span>: <span class="string">"off"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="a-标签改成"><a href="#a-标签改成" class="headerlink" title="a 标签改成"></a>a 标签改成</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"# "</span>&gt;</span>&#123;text&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>注意:#后面有一个空格</p></blockquote><h4 id="重启"><a href="#重启" class="headerlink" title="重启"></a>重启</h4>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;p&gt;react a 标签 eslint 问题&lt;/p&gt;
&lt;h3 id=&quot;waring-log&quot;&gt;&lt;a href=&quot;#waring-log&quot; cla
      
    
    </summary>
    
      <category term="技术" scheme="https://ax-codes.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="js" scheme="https://ax-codes.github.io/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>d2 admin vue.config.js配置本地开发代理</title>
    <link href="https://ax-codes.github.io/2019/12/28/%E6%8A%80%E6%9C%AF/2019-12-28-d2%20admin%20vue.config.js%E9%85%8D%E7%BD%AE%E6%9C%AC%E5%9C%B0%E5%BC%80%E5%8F%91%E4%BB%A3%E7%90%86/"/>
    <id>https://ax-codes.github.io/2019/12/28/技术/2019-12-28-d2 admin vue.config.js配置本地开发代理/</id>
    <published>2019-12-28T02:00:00.000Z</published>
    <updated>2020-06-09T10:00:01.837Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>d2 admin vue.config.js 配置本地开发代理</p><h3 id="在-vue-config-js-配置"><a href="#在-vue-config-js-配置" class="headerlink" title="在 vue.config.js 配置"></a>在 vue.config.js 配置</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">devServer: &#123;</span><br><span class="line">    publicPath, <span class="comment">// 和 publicPath 保持一致</span></span><br><span class="line">    proxy: &#123;</span><br><span class="line">      <span class="string">'/api'</span>: &#123;</span><br><span class="line">        target: <span class="string">'http://localhost:3000'</span>,</span><br><span class="line">        ws: <span class="literal">true</span>,</span><br><span class="line">        changeOrigin: <span class="literal">true</span>,</span><br><span class="line">        pathRewrite: &#123;</span><br><span class="line">          <span class="string">'^/api'</span>: <span class="string">'/api'</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;p&gt;d2 admin vue.config.js 配置本地开发代理&lt;/p&gt;
&lt;h3 id=&quot;在-vue-config-js-配置&quot;&gt;&lt;a hre
      
    
    </summary>
    
      <category term="技术" scheme="https://ax-codes.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="js" scheme="https://ax-codes.github.io/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>nginx https 配置</title>
    <link href="https://ax-codes.github.io/2019/12/28/%E6%8A%80%E6%9C%AF/2019-12-28-nginx%20https%20%E9%85%8D%E7%BD%AE/"/>
    <id>https://ax-codes.github.io/2019/12/28/技术/2019-12-28-nginx https 配置/</id>
    <published>2019-12-28T02:00:00.000Z</published>
    <updated>2020-06-09T10:00:01.838Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>nginx https 配置<br>证书:我的证书是阿里云提供的免费一年的,具体下载方式可以百度</p><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p>在 nginx 新增一个 server 节点配置</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">server          # SSL配置</span><br><span class="line">    &#123;</span><br><span class="line">        listen <span class="number">443</span>;</span><br><span class="line">        server_name www.zgaiyu.com zgaiyu.com;           # 改成你的域名</span><br><span class="line">        ssl on;</span><br><span class="line">        root /usr/local/wx_app_api/;</span><br><span class="line">        ssl_certificate 1_www.zgaiyu.com_bundle.crt;     # 改成你的证书名称</span><br><span class="line">        ssl_certificate_key 2_www.zgaiyu.com.key;          # 改成你的证书名称</span><br><span class="line">        ssl_session_timeout <span class="number">5</span>m;</span><br><span class="line">        ssl_protocols TLSv1 TLSv1<span class="number">.1</span> TLSv1<span class="number">.2</span>;</span><br><span class="line">        ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;</span><br><span class="line">        ssl_prefer_server_ciphers on;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        # Load configuration files for the default server block.</span><br><span class="line">        include /etc/nginx/<span class="keyword">default</span>.d<span class="comment">/*.conf;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        location ^~/wx_app_api/ &#123;</span></span><br><span class="line"><span class="comment">            proxy_set_header Host $host;</span></span><br><span class="line"><span class="comment">            proxy_set_header X-Real-IP $remote_addr;</span></span><br><span class="line"><span class="comment">            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span></span><br><span class="line"><span class="comment">            #配置反向代理 注意:最后一定要加上/不然跳转链接是http://127.0.0.1:8080/wx_app_api/</span></span><br><span class="line"><span class="comment">            proxy_pass http://127.0.0.1:8080/; #这个8080是我web api的端口</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;p&gt;nginx https 配置&lt;br&gt;证书:我的证书是阿里云提供的免费一年的,具体下载方式可以百度&lt;/p&gt;
&lt;h3 id=&quot;配置&quot;&gt;&lt;a hr
      
    
    </summary>
    
      <category term="技术" scheme="https://ax-codes.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="linux" scheme="https://ax-codes.github.io/tags/linux/"/>
    
      <category term="开发工具/插件" scheme="https://ax-codes.github.io/tags/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7-%E6%8F%92%E4%BB%B6/"/>
    
  </entry>
  
  <entry>
    <title>vscode注释插件</title>
    <link href="https://ax-codes.github.io/2019/12/28/%E6%8A%80%E6%9C%AF/2019-12-28-vscode%E6%B3%A8%E9%87%8A%E6%8F%92%E4%BB%B6/"/>
    <id>https://ax-codes.github.io/2019/12/28/技术/2019-12-28-vscode注释插件/</id>
    <published>2019-12-28T02:00:00.000Z</published>
    <updated>2020-06-09T10:00:01.839Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>vscode 搜索插件并安装:korofileheader<br>github:<a href="https://github.com/OBKoro1/koro1FileHeader" target="_blank" rel="noopener">https://github.com/OBKoro1/koro1FileHeader</a></p><h3 id="配置-具体配置可以参照-github-wiki-修改"><a href="#配置-具体配置可以参照-github-wiki-修改" class="headerlink" title="配置(具体配置可以参照 github wiki 修改)"></a>配置(具体配置可以参照 github wiki 修改)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"fileheader.customMade"</span>: &#123;</span><br><span class="line">        <span class="string">"Description"</span>: <span class="string">""</span>,</span><br><span class="line">        <span class="string">"Author"</span>: <span class="string">"ax"</span>,</span><br><span class="line">        <span class="string">"Github"</span>: <span class="string">"https://github.com/GuoXingGitHub"</span>,</span><br><span class="line">        <span class="string">"Date"</span>: <span class="string">"Do not edit"</span>,</span><br><span class="line">        <span class="string">"LastEditors"</span>: <span class="string">"ax"</span>,</span><br><span class="line">        <span class="string">"LastEditTime"</span>: <span class="string">"Do not edit"</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"fileheader.cursorMode"</span>: &#123;</span><br><span class="line">        <span class="string">"description"</span>: <span class="string">""</span>,</span><br><span class="line">        <span class="string">"param"</span>: <span class="string">""</span>,</span><br><span class="line">        <span class="string">"return"</span>: <span class="string">""</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"fileheader.configObj"</span>: &#123;</span><br><span class="line">        <span class="string">"createFileTime"</span>: <span class="literal">false</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><h4 id="文件头部注释："><a href="#文件头部注释：" class="headerlink" title="文件头部注释："></a>文件头部注释：</h4><p>在当前编辑文件中使用快捷键:window：ctrl+alt+i/mac：ctrl+cmd+i,即可生成文件头部注释。</p><h4 id="函数注释："><a href="#函数注释：" class="headerlink" title="函数注释："></a>函数注释：</h4><p>将光标放在函数行或者将光标放在函数上方的空白行<br>使用快捷键 window：ctrl+alt+t,mac：ctrl+cmd+t，即可生成函数注释。<br>事实上，函数注释在文件的任意位置都可生成，这里需要自己控制。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;p&gt;vscode 搜索插件并安装:korofileheader&lt;br&gt;github:&lt;a href=&quot;https://github.com/OB
      
    
    </summary>
    
      <category term="技术" scheme="https://ax-codes.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="开发工具/插件" scheme="https://ax-codes.github.io/tags/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7-%E6%8F%92%E4%BB%B6/"/>
    
      <category term="效率工具/插件" scheme="https://ax-codes.github.io/tags/%E6%95%88%E7%8E%87%E5%B7%A5%E5%85%B7-%E6%8F%92%E4%BB%B6/"/>
    
      <category term="其他工具/插件" scheme="https://ax-codes.github.io/tags/%E5%85%B6%E4%BB%96%E5%B7%A5%E5%85%B7-%E6%8F%92%E4%BB%B6/"/>
    
  </entry>
  
  <entry>
    <title>nestjs 使用class-validator自定义字段检测</title>
    <link href="https://ax-codes.github.io/2019/12/28/%E6%8A%80%E6%9C%AF/2019-12-28-nestjs%20%E4%BD%BF%E7%94%A8class-validator%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AD%97%E6%AE%B5%E6%A3%80%E6%B5%8B/"/>
    <id>https://ax-codes.github.io/2019/12/28/技术/2019-12-28-nestjs 使用class-validator自定义字段检测/</id>
    <published>2019-12-28T02:00:00.000Z</published>
    <updated>2020-06-09T10:00:01.838Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>nestjs 使用 class-validator 自定义字段检测</p><p>###</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">@ValidatorConstraint(&#123; <span class="attr">async</span>: <span class="literal">true</span> &#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">IsUserAlreadyExistConstraint</span></span></span><br><span class="line"><span class="class">  <span class="title">implements</span> <span class="title">ValidatorConstraintInterface</span> </span>&#123;</span><br><span class="line">  <span class="keyword">async</span> validate(username: any, <span class="attr">args</span>: ValidationArguments) &#123;</span><br><span class="line">    <span class="keyword">const</span> usersRepository = <span class="keyword">await</span> getRepository(UserEntity);</span><br><span class="line">    <span class="keyword">return</span> !((<span class="keyword">await</span> usersRepository.count(&#123; <span class="attr">username</span>: username &#125;)) &gt; <span class="number">0</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">IsUserAlreadyExist</span>(<span class="params">validationOptions?: ValidationOptions</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">object: Object, propertyName: string</span>) </span>&#123;</span><br><span class="line">    registerDecorator(&#123;</span><br><span class="line">      target: object.constructor,</span><br><span class="line">      propertyName: propertyName,</span><br><span class="line">      options: validationOptions,</span><br><span class="line">      constraints: [],</span><br><span class="line">      validator: IsUserAlreadyExistConstraint</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@IsUserAlreadyExist(&#123; <span class="attr">message</span>: <span class="string">'用户名已经存在'</span> &#125;)</span><br><span class="line">username: string;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;p&gt;nestjs 使用 class-validator 自定义字段检测&lt;/p&gt;
&lt;p&gt;###&lt;/p&gt;
&lt;figure class=&quot;highli
      
    
    </summary>
    
      <category term="技术" scheme="https://ax-codes.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="js" scheme="https://ax-codes.github.io/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>vscode 配置vue开发环境</title>
    <link href="https://ax-codes.github.io/2019/11/01/%E6%8A%80%E6%9C%AF/2019-11-01-vscode%20%E9%85%8D%E7%BD%AEvue%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/"/>
    <id>https://ax-codes.github.io/2019/11/01/技术/2019-11-01-vscode 配置vue开发环境/</id>
    <published>2019-11-01T09:00:00.000Z</published>
    <updated>2020-06-09T10:00:01.836Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>vscode 配置 vue 开发环境</p><h3 id="安装-vscode"><a href="#安装-vscode" class="headerlink" title="安装 vscode"></a>安装 vscode</h3><p>下载地址:<a href="https://code.visualstudio.com/" target="_blank" rel="noopener">https://code.visualstudio.com/</a></p><h3 id="安装-color-主题"><a href="#安装-color-主题" class="headerlink" title="安装 color 主题"></a>安装 color 主题</h3><p>在 vscode 扩展程序里搜索 One Dark Pro 然后进行安装</p><h3 id="安装-icon-主题"><a href="#安装-icon-主题" class="headerlink" title="安装 icon 主题"></a>安装 icon 主题</h3><p>在 vscode 扩展程序里搜索 Material Icon Theme 然后进行安装</p><h3 id="安装-vue-高亮-vue-代码"><a href="#安装-vue-高亮-vue-代码" class="headerlink" title="安装 vue(高亮 vue 代码)"></a>安装 vue(高亮 vue 代码)</h3><p>在 vscode 扩展程序里搜索 vue 然后进行安装</p><h3 id="安装-Prettier"><a href="#安装-Prettier" class="headerlink" title="安装 Prettier"></a>安装 Prettier</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ext install esbenp.prettier-vscode</span><br></pre></td></tr></table></figure><h3 id="安装-Eslint"><a href="#安装-Eslint" class="headerlink" title="安装 Eslint"></a>安装 Eslint</h3><p>在 vscode 扩展程序里搜索 Eslint 然后进行安装</p><h3 id="修改-setting-json"><a href="#修改-setting-json" class="headerlink" title="修改 setting.json"></a>修改 setting.json</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;editor.tabSize&quot;: 2,</span><br><span class="line">  &quot;editor.detectIndentation&quot;: false,</span><br><span class="line">  &quot;editor.formatOnType&quot;: false,</span><br><span class="line">  &quot;editor.formatOnPaste&quot;: true,</span><br><span class="line">  &quot;editor.formatOnSave&quot;: true,</span><br><span class="line">  &quot;prettier.tabWidth&quot;: 2,</span><br><span class="line">  &quot;prettier.semi&quot;: true,</span><br><span class="line">  &quot;prettier.singleQuote&quot;: true,</span><br><span class="line">  &quot;[javascript]&quot;: &#123;</span><br><span class="line">    &quot;editor.defaultFormatter&quot;: &quot;esbenp.prettier-vscode&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;[html]&quot;: &#123;</span><br><span class="line">    &quot;editor.defaultFormatter&quot;: &quot;esbenp.prettier-vscode&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;[markdown]&quot;: &#123;</span><br><span class="line">    &quot;editor.defaultFormatter&quot;: &quot;esbenp.prettier-vscode&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;vetur.format.options.tabSize&quot;: 2,</span><br><span class="line">  &quot;vetur.format.defaultFormatter.html&quot;: &quot;prettyhtml&quot;,</span><br><span class="line">  &quot;vetur.format.defaultFormatter.js&quot;: &quot;vscode-typescript&quot;,</span><br><span class="line">  &quot;javascript.format.insertSpaceBeforeFunctionParenthesis&quot;: true,</span><br><span class="line">  &quot;eslint.autoFixOnSave&quot;: true,</span><br><span class="line">  &quot;eslint.validate&quot;: [</span><br><span class="line">    &quot;javascript&quot;,</span><br><span class="line">    &quot;html&quot;,</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;language&quot;: &quot;vue&quot;,</span><br><span class="line">      &quot;autoFix&quot;: true</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  &quot;workbench.iconTheme&quot;: &quot;material-icon-theme&quot;,</span><br><span class="line">  &quot;workbench.colorTheme&quot;: &quot;One Dark Pro&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="配置-prettierrc-js"><a href="#配置-prettierrc-js" class="headerlink" title="配置.prettierrc.js"></a>配置.prettierrc.js</h3><p>在项目根目录新增.prettierrc.js 文件新增内容</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">  printWidth: 200, &#x2F;&#x2F; 最大打印宽度,超出将换行</span><br><span class="line">  singleQuote: false, &#x2F;&#x2F; 默认单引号 ,false 默认使用双引号</span><br><span class="line">  bracketSpacing: true,</span><br><span class="line">  jsxBracketSameLine: true,</span><br><span class="line">  htmlWhitespaceSensitivity: &quot;ignore&quot; &#x2F;&#x2F; 问题1中的设置</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="配置-eslintrc-js"><a href="#配置-eslintrc-js" class="headerlink" title="配置.eslintrc.js"></a>配置.eslintrc.js</h3><p>在项目根目录新增.eslintrc.js 文件新增内容</p><p>原因:<br>修改了 Prettier 格式化后 ESlint 检查警报,并更改了我的代码格式.<br>首先检查 ESlint 配置是否使用了 prettier 规则,如果确定使用了,则是一些自定义规则在 ESlint 和 Prettier 插件中的配置不一致导致的。检查 eslintrc.js</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">  root: true,</span><br><span class="line">  env: &#123;</span><br><span class="line">    node: true</span><br><span class="line">  &#125;,</span><br><span class="line">  extends: [&#39;plugin:vue&#x2F;essential&#39;, &#39;@vue&#x2F;standard&#39;],</span><br><span class="line">  rules: &#123;</span><br><span class="line">    &#39;no-console&#39;: process.env.NODE_ENV &#x3D;&#x3D;&#x3D; &#39;production&#39; ? &#39;error&#39; : &#39;off&#39;,</span><br><span class="line">    &#39;no-debugger&#39;: process.env.NODE_ENV &#x3D;&#x3D;&#x3D; &#39;production&#39; ? &#39;error&#39; : &#39;off&#39;</span><br><span class="line">  &#125;,</span><br><span class="line">  parserOptions: &#123;</span><br><span class="line">    parser: &#39;babel-eslint&#39;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;p&gt;vscode 配置 vue 开发环境&lt;/p&gt;
&lt;h3 id=&quot;安装-vscode&quot;&gt;&lt;a href=&quot;#安装-vscode&quot; class=&quot;
      
    
    </summary>
    
      <category term="技术" scheme="https://ax-codes.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="开发工具/插件" scheme="https://ax-codes.github.io/tags/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7-%E6%8F%92%E4%BB%B6/"/>
    
      <category term="效率工具/插件" scheme="https://ax-codes.github.io/tags/%E6%95%88%E7%8E%87%E5%B7%A5%E5%85%B7-%E6%8F%92%E4%BB%B6/"/>
    
      <category term="js" scheme="https://ax-codes.github.io/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>Prettier配置</title>
    <link href="https://ax-codes.github.io/2019/11/01/%E6%8A%80%E6%9C%AF/2019-11-01-Prettier%E9%85%8D%E7%BD%AE/"/>
    <id>https://ax-codes.github.io/2019/11/01/技术/2019-11-01-Prettier配置/</id>
    <published>2019-11-01T09:00:00.000Z</published>
    <updated>2020-06-09T10:00:01.836Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>Prettier 安装命令</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ext install esbenp.prettier-vscode</span><br></pre></td></tr></table></figure><h3 id="vue"><a href="#vue" class="headerlink" title="vue"></a>vue</h3><p>在项目根目录新增.prettierrc.js 文件新增内容</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">  printWidth: 200, &#x2F;&#x2F; 最大打印宽度,超出将换行</span><br><span class="line">  singleQuote: false, &#x2F;&#x2F; 默认单引号 ,false 默认使用双引号</span><br><span class="line">  bracketSpacing: true,</span><br><span class="line">  jsxBracketSameLine: true,</span><br><span class="line">  htmlWhitespaceSensitivity: &quot;ignore&quot; &#x2F;&#x2F; 问题1中的设置</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>修改了 Prettier 格式化后 ESlint 检查警报,并更改了我的代码格式.<br>首先检查 ESlint 配置是否使用了 prettier 规则,如果确定使用了,则是一些自定义规则在 ESlint 和 Prettier 插件中的配置不一致导致的。检查 eslintrc.js</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">  root: true,</span><br><span class="line">  env: &#123; node: true &#125;,</span><br><span class="line">  extends: [&quot;plugin:vue&#x2F;essential&quot;, &quot;@vue&#x2F;prettier&quot;, &quot;@vue&#x2F;typescript&quot;],</span><br><span class="line">  rules: &#123;</span><br><span class="line">    &quot;no-console&quot;: process.env.NODE_ENV &#x3D;&#x3D;&#x3D; &quot;production&quot; ? &quot;error&quot; : &quot;off&quot;,</span><br><span class="line">    &quot;no-debugger&quot;: process.env.NODE_ENV &#x3D;&#x3D;&#x3D; &quot;production&quot; ? &quot;error&quot; : &quot;off&quot;,</span><br><span class="line">    &quot;prettier&#x2F;prettier&quot;: [</span><br><span class="line">      &quot;error&quot;,</span><br><span class="line">    &#x2F;&#x2F; 如果插件配置中修改了相关选项,</span><br><span class="line">    &#x2F;&#x2F; 则必须在此添加相对应的自定义规则否则就会出现编辑器格式化后ESlint检查无法通过的情况。</span><br><span class="line">      &#123;</span><br><span class="line">        printWidth: 200,</span><br><span class="line">        singleQuote: false,</span><br><span class="line">        bracketSpacing: true,</span><br><span class="line">        jsxBracketSameLine: true,</span><br><span class="line">        htmlWhitespaceSensitivity: &quot;ignore&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  parserOptions: &#123; parser: &quot;@typescript-eslint&#x2F;parser&quot; &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="ts"><a href="#ts" class="headerlink" title="ts"></a>ts</h3><p>在项目根目录新增.prettierrc.js 文件新增内容</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">  printWidth: 120,</span><br><span class="line">  tabWidth: 4,</span><br><span class="line">  singleQuote: true,</span><br><span class="line">  semi: true,</span><br><span class="line">  trailingComma: &#39;es5&#39;,</span><br><span class="line">  bracketSpacing: true,</span><br><span class="line">  jsxBracketSameLine: true,</span><br><span class="line">  arrowParens: &#39;always&#39;,</span><br><span class="line">  parser: &#39;typescript&#39;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;p&gt;Prettier 安装命令&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class
      
    
    </summary>
    
      <category term="技术" scheme="https://ax-codes.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="开发工具/插件" scheme="https://ax-codes.github.io/tags/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7-%E6%8F%92%E4%BB%B6/"/>
    
      <category term="效率工具/插件" scheme="https://ax-codes.github.io/tags/%E6%95%88%E7%8E%87%E5%B7%A5%E5%85%B7-%E6%8F%92%E4%BB%B6/"/>
    
      <category term="其他工具/插件" scheme="https://ax-codes.github.io/tags/%E5%85%B6%E4%BB%96%E5%B7%A5%E5%85%B7-%E6%8F%92%E4%BB%B6/"/>
    
      <category term="js" scheme="https://ax-codes.github.io/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>osharp框架学习</title>
    <link href="https://ax-codes.github.io/2019/10/24/%E6%8A%80%E6%9C%AF/2019-10-24-osharp%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0%20copy/"/>
    <id>https://ax-codes.github.io/2019/10/24/技术/2019-10-24-osharp框架学习 copy/</id>
    <published>2019-10-24T09:00:00.000Z</published>
    <updated>2020-06-09T10:00:01.832Z</updated>
    
    <content type="html"><![CDATA[<p>###<br>osharp框架学习</p><h3 id="包管理"><a href="#包管理" class="headerlink" title="包管理"></a>包管理</h3><p>AspOsharpPackManager: AspNetCore 模块管理器 AspOsharpPackManager : OsharpPackManager, IAspUsePack</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;###&lt;br&gt;osharp框架学习&lt;/p&gt;
&lt;h3 id=&quot;包管理&quot;&gt;&lt;a href=&quot;#包管理&quot; class=&quot;headerlink&quot; title=&quot;包管理&quot;&gt;&lt;/a&gt;包管理&lt;/h3&gt;&lt;p&gt;AspOsharpPackManager: AspNetCore 模块管理器 As
      
    
    </summary>
    
      <category term="技术" scheme="https://ax-codes.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term=".net/.net core" scheme="https://ax-codes.github.io/tags/net-net-core/"/>
    
  </entry>
  
</feed>
